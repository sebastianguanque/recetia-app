{"version":3,"file":"HomeView-Cq4ruw7m.js","sources":["../../src/components/navigation/AppTabs.vue","../../src/stores/ingredients.js","../../src/components/features/IngredientsList.vue","../../src/components/ui/MealTypeSelector.vue","../../src/components/ui/RecipeCard.vue","../../src/stores/recipes.js","../../src/composables/useRecipeGenerator.js","../../src/components/features/RecipeCreator.vue","../../src/components/features/SavedRecipesList.vue","../../src/components/ui/ShoppingOptions.vue","../../src/components/features/ShoppingListResult.vue","../../src/composables/useShoppingListGenerator.js","../../src/components/features/ShoppingList.vue","../../src/views/HomeView.vue"],"sourcesContent":["<template>\n  <nav class=\"tabs\" role=\"tablist\">\n    <ul class=\"tabs-list\">\n      <li class=\"tab\">\n        <button\n          id=\"recipe-creator-tab\"\n          :class=\"[\n            'tab-button',\n            { active: appStore.currentTab === 'recipe-creator' },\n          ]\"\n          role=\"tab\"\n          :aria-selected=\"appStore.currentTab === 'recipe-creator'\"\n          aria-controls=\"recipe-creator\"\n          @click=\"appStore.switchTab('recipe-creator')\"\n        >\n          <i class=\"fas fa-magic\"></i> Creador de Recetas\n        </button>\n      </li>\n      <li class=\"tab\">\n        <button\n          id=\"shopping-list-tab\"\n          :class=\"[\n            'tab-button',\n            { active: appStore.currentTab === 'shopping-list' },\n          ]\"\n          role=\"tab\"\n          :aria-selected=\"appStore.currentTab === 'shopping-list'\"\n          aria-controls=\"shopping-list\"\n          @click=\"appStore.switchTab('shopping-list')\"\n        >\n          <i class=\"fas fa-shopping-cart\"></i> Lista de Compras\n        </button>\n      </li>\n      <li class=\"tab\">\n        <button\n          class=\"tab-button\"\n          role=\"button\"\n          aria-label=\"Configuración de la aplicación\"\n          @click=\"showSettings\"\n        >\n          <i class=\"fas fa-cog\"></i> Configuración\n        </button>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script setup>\nimport { useAppStore } from \"@/stores/app\";\nimport { useApiStore } from \"@/stores/api\";\n\nconst appStore = useAppStore();\nconst apiStore = useApiStore();\n\nconst showSettings = () => {\n  const newKey = prompt(\"Ingresa nueva API Key de Gemini:\", apiStore.apiKey);\n  if (newKey && newKey.trim()) {\n    apiStore.setApiKey(newKey.trim());\n    alert(\"API Key actualizada correctamente\");\n  }\n};\n</script>\n\n<style scoped>\n.tabs {\n  display: flex;\n  background: #f8f9fa;\n  border-bottom: 1px solid #e9ecef;\n}\n\n.tabs-list {\n  display: flex;\n  flex: 1;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.tab {\n  display: flex;\n  flex: 1;\n}\n\n.tab-button {\n  flex: 1;\n  padding: 15px 20px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  font-size: 1rem;\n  color: #666;\n  transition: all 0.3s ease;\n  border-bottom: 3px solid transparent;\n}\n\n.tab-button:hover {\n  background: #e9ecef;\n  color: #333;\n}\n\n.tab-button.active {\n  color: #667eea;\n  border-bottom-color: #667eea;\n  background: white;\n}\n\n.tab-button i {\n  margin-right: 8px;\n}\n\n@media (max-width: 768px) {\n  .tabs-list {\n    flex-direction: column;\n  }\n}\n</style>\n","import { defineStore } from \"pinia\";\nimport { ref } from \"vue\";\nimport { useLocalStorage } from \"@/composables/useLocalStorage\";\n\nexport const useIngredientsStore = defineStore(\"ingredients\", () => {\n  const { getItem, setItem } = useLocalStorage();\n\n  const ingredients = ref(getItem(\"inventory_items\", []));\n\n  const addIngredient = (ingredient) => {\n    const normalizedIngredient = ingredient.toLowerCase().trim();\n    if (\n      normalizedIngredient &&\n      !ingredients.value.includes(normalizedIngredient)\n    ) {\n      ingredients.value.push(normalizedIngredient);\n      setItem(\"inventory_items\", ingredients.value);\n    }\n  };\n\n  const removeIngredient = (index) => {\n    ingredients.value.splice(index, 1);\n    setItem(\"inventory_items\", ingredients.value);\n  };\n\n  const clearAllIngredients = () => {\n    ingredients.value = [];\n    setItem(\"inventory_items\", ingredients.value);\n  };\n\n  const categorizeIngredients = () => {\n    const categories = {\n      meats: [\n        \"pollo\",\n        \"carne\",\n        \"pescado\",\n        \"cerdo\",\n        \"ternera\",\n        \"atun\",\n        \"salmón\",\n      ],\n      vegetables: [\n        \"verduras\",\n        \"brócoli\",\n        \"zanahoria\",\n        \"espinaca\",\n        \"tomate\",\n        \"cebolla\",\n        \"pimiento\",\n        \"lechuga\",\n        \"calabacín\",\n      ],\n      carbs: [\n        \"arroz\",\n        \"pasta\",\n        \"pan\",\n        \"patata\",\n        \"patatas\",\n        \"quinoa\",\n        \"batata\",\n        \"harina\",\n        \"tortillas\",\n      ],\n      dairy: [\"leche\", \"queso\", \"yogurt\", \"manteca\", \"crema\"],\n      eggs: [\"huevos\", \"huevo\"],\n      fruits: [\n        \"manzana\",\n        \"plátano\",\n        \"naranja\",\n        \"frutas\",\n        \"fresa\",\n        \"uvas\",\n        \"kiwi\",\n        \"arándanos\",\n      ],\n      cereals: [\"avena\", \"cereales\", \"granola\"],\n      legumes: [\"lentejas\", \"garbanzos\", \"frijoles\", \"judías\"],\n      fats: [\"aceite\", \"aguacate\", \"nueces\", \"almendras\", \"aceitunas\"],\n    };\n\n    const categorized = {\n      meats: [],\n      vegetables: [],\n      carbs: [],\n      dairy: [],\n      eggs: [],\n      fruits: [],\n      cereals: [],\n      legumes: [],\n      fats: [],\n      others: [],\n    };\n\n    ingredients.value.forEach((ingredient) => {\n      let categorized_flag = false;\n      for (const [category, items] of Object.entries(categories)) {\n        if (items.includes(ingredient.toLowerCase())) {\n          categorized[category].push(ingredient);\n          categorized_flag = true;\n          break;\n        }\n      }\n      if (!categorized_flag) {\n        categorized.others.push(ingredient);\n      }\n    });\n\n    return categorized;\n  };\n\n  return {\n    ingredients,\n    addIngredient,\n    removeIngredient,\n    clearAllIngredients,\n    categorizeIngredients,\n  };\n});\n","<template>\n  <section class=\"inventory-section\">\n    <header class=\"section-header\">\n      <h3>Mis Ingredientes:</h3>\n      <button\n        class=\"clear-btn\"\n        title=\"Limpiar todos los ingredientes\"\n        aria-label=\"Limpiar todos los ingredientes\"\n        @click=\"handleClearAll\"\n        ref=\"clearBtn\"\n      >\n        <i class=\"fas fa-trash-alt\"></i> Limpiar Todo\n      </button>\n      <div\n        v-if=\"clearErrorMessage\"\n        class=\"error-message\"\n        aria-live=\"assertive\"\n        tabindex=\"-1\"\n        ref=\"clearErrorRef\"\n      >\n        {{ clearErrorMessage }}\n      </div>\n    </header>\n\n    <form class=\"input-form\" @submit.prevent=\"handleAddIngredient\">\n      <div class=\"input-group\">\n        <label for=\"inventoryItem\" class=\"sr-only\"> Agregar ingrediente </label>\n        <input\n          id=\"inventoryItem\"\n          v-model=\"newIngredient\"\n          type=\"text\"\n          placeholder=\"Ej: tomates, cebolla, pollo, arroz...\"\n          aria-label=\"Ingresa un ingrediente\"\n        />\n        <button type=\"submit\" aria-label=\"Agregar ingrediente\" ref=\"addBtn\">\n          <i class=\"fas fa-plus\"></i> Agregar\n        </button>\n        <div\n          v-if=\"errorMessage\"\n          class=\"error-message\"\n          aria-live=\"assertive\"\n          tabindex=\"-1\"\n          ref=\"errorRef\"\n        >\n          {{ errorMessage }}\n        </div>\n      </div>\n    </form>\n\n    <ul class=\"inventory-list\" role=\"list\">\n      <li v-if=\"ingredientsStore.ingredients.length === 0\" class=\"empty-state\">\n        <p>\n          No hay ingredientes agregados. Agrega algunos ingredientes que tienes\n          disponibles.\n        </p>\n      </li>\n\n      <li\n        v-for=\"(ingredient, index) in ingredientsStore.ingredients\"\n        :key=\"`${ingredient}-${index}`\"\n        class=\"inventory-item\"\n        role=\"listitem\"\n      >\n        <span class=\"ingredient-name\">{{ ingredient }}</span>\n        <button\n          class=\"remove-item\"\n          :aria-label=\"`Eliminar ${ingredient}`\"\n          title=\"Eliminar ingrediente\"\n          @click=\"ingredientsStore.removeIngredient(index)\"\n        >\n          <i class=\"fas fa-times\"></i>\n        </button>\n      </li>\n    </ul>\n  </section>\n</template>\n\n<script setup>\nimport { ref, nextTick } from \"vue\";\nimport { useIngredientsStore } from \"@/stores/ingredients\";\n\nconst ingredientsStore = useIngredientsStore();\nconst newIngredient = ref(\"\");\n\nconst errorMessage = ref(\"\");\nconst errorRef = ref(null);\nconst addBtn = ref(null);\n\nconst handleAddIngredient = () => {\n  if (!newIngredient.value.trim()) {\n    errorMessage.value = \"Debes ingresar un ingrediente antes de agregar.\";\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n    return;\n  }\n  errorMessage.value = \"\";\n  ingredientsStore.addIngredient(newIngredient.value.trim());\n  newIngredient.value = \"\";\n};\n\nconst clearErrorMessage = ref(\"\");\nconst clearErrorRef = ref(null);\nconst clearBtn = ref(null);\n\nconst handleClearAll = () => {\n  if (ingredientsStore.ingredients.length === 0) {\n    clearErrorMessage.value = \"No hay ingredientes para eliminar.\";\n    nextTick(() => {\n      if (clearErrorRef.value) clearErrorRef.value.focus();\n    });\n    return;\n  }\n  clearErrorMessage.value = \"\";\n  if (\n    confirm(\"¿Estás seguro de que quieres eliminar todos los ingredientes?\")\n  ) {\n    ingredientsStore.clearAllIngredients();\n  }\n};\n</script>\n\n<style scoped>\n.inventory-section {\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 10px;\n  border: 1px solid #e9ecef;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.section-header h3 {\n  color: #333;\n  margin: 0;\n  font-size: 1.2rem;\n}\n\n.clear-btn {\n  padding: 8px 15px;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.clear-btn:hover:not(:disabled) {\n  background: #c82333;\n  transform: translateY(-1px);\n}\n\n.clear-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.clear-btn i {\n  font-size: 0.8rem;\n}\n\n.input-form {\n  margin-bottom: 20px;\n}\n\n.input-group {\n  display: flex;\n  gap: 10px;\n}\n\n.input-group input {\n  flex: 1;\n  padding: 12px 15px;\n  border: 2px solid #e9ecef;\n  border-radius: 8px;\n  font-size: 1rem;\n  transition: border-color 0.3s ease;\n}\n\n.input-group input:focus {\n  outline: none;\n  border-color: #667eea;\n}\n\n.input-group button {\n  padding: 12px 20px;\n  background: #667eea;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background 0.3s ease;\n}\n\n.input-group button:hover:not(:disabled) {\n  background: #5a6fd8;\n}\n\n.error-message {\n  color: #dc3545;\n  background: #fff3f3;\n  border: 1px solid #dc3545;\n  border-radius: 6px;\n  padding: 8px 12px;\n  margin-top: 8px;\n  font-size: 1rem;\n  outline: none;\n}\n\n.inventory-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  min-height: 50px;\n  padding: 15px;\n  background: white;\n  border-radius: 8px;\n  border: 2px dashed #dee2e6;\n  list-style: none;\n  margin: 0;\n}\n\n.empty-state {\n  width: 100%;\n  text-align: center;\n  color: #666;\n  font-style: italic;\n}\n\n.empty-state p {\n  margin: 20px 0;\n}\n\n.inventory-item {\n  background: #667eea;\n  color: white;\n  padding: 8px 15px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n}\n\n.inventory-item:hover {\n  background: #5a6fd8;\n  transform: translateY(-1px);\n}\n\n.ingredient-name {\n  text-transform: capitalize;\n}\n\n.remove-item {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.8rem;\n  transition: background 0.3s ease;\n}\n\n.remove-item:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n@media (max-width: 768px) {\n  .section-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n\n  .input-group {\n    flex-direction: column;\n  }\n}\n</style>\n","<template>\n  <section class=\"meal-type-section\">\n    <h3>Tipo de comida:</h3>\n\n    <div class=\"meal-buttons\" role=\"group\" aria-label=\"Tipo de comida\">\n      <button\n        v-for=\"meal in mealTypes\"\n        :key=\"meal.value\"\n        :class=\"['meal-btn', { selected: modelValue === meal.value }]\"\n        :data-meal=\"meal.value\"\n        role=\"radio\"\n        :aria-checked=\"modelValue === meal.value\"\n        @click=\"selectMeal(meal.value)\"\n      >\n        <i :class=\"meal.icon\"></i>\n\n        {{ meal.label }}\n      </button>\n    </div>\n  </section>\n</template>\n\n<script setup>\nconst props = defineProps({\n  modelValue: {\n    type: String,\n\n    default: \"\",\n  },\n});\n\nconst emit = defineEmits([\"update:modelValue\"]);\n\nconst mealTypes = [\n  { value: \"desayuno\", label: \"Desayuno\", icon: \"fas fa-sun\" },\n\n  { value: \"almuerzo\", label: \"Almuerzo\", icon: \"fas fa-utensils\" },\n\n  { value: \"merienda\", label: \"Merienda\", icon: \"fas fa-cookie\" },\n\n  { value: \"cena\", label: \"Cena\", icon: \"fas fa-moon\" },\n];\n\nconst selectMeal = (mealType) => {\n  emit(\"update:modelValue\", mealType);\n};\n</script>\n\n<style scoped>\n.meal-type-section h3 {\n  margin-bottom: 15px;\n\n  color: #333;\n\n  font-size: 1.2rem;\n}\n\n.meal-buttons {\n  display: grid;\n\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n\n  gap: 15px;\n}\n\n.meal-btn {\n  padding: 15px 20px;\n\n  border: 2px solid #e9ecef;\n\n  background: white;\n\n  border-radius: 10px;\n\n  cursor: pointer;\n\n  transition: all 0.3s ease;\n\n  font-size: 1rem;\n\n  color: #666;\n\n  text-align: center;\n}\n\n.meal-btn:hover {\n  border-color: #667eea;\n\n  color: #667eea;\n\n  transform: translateY(-2px);\n}\n\n.meal-btn.selected {\n  background: #667eea;\n\n  color: white;\n\n  border-color: #667eea;\n}\n\n.meal-btn i {\n  display: block;\n\n  font-size: 1.5rem;\n\n  margin-bottom: 8px;\n}\n\n@media (max-width: 768px) {\n  .meal-buttons {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 480px) {\n  .meal-buttons {\n    grid-template-columns: 1fr;\n  }\n}\n</style>\n","<template>\n  <article class=\"recipe-card\">\n    <header class=\"recipe-header\">\n      <h3>\n        <i :class=\"mealIcon\"></i>\n\n        {{ recipe.nombre }}\n      </h3>\n\n      <p>\n        <strong>Tipo:</strong>\n        {{ mealTypeLabel }}\n      </p>\n      <p v-if=\"recipe.cookingMethod\">\n        <strong>Método de cocción:</strong>\n        {{ recipe.cookingMethod }}\n      </p>\n    </header>\n\n    <div class=\"recipe-info\">\n      <div class=\"info-item\">\n        <i class=\"fas fa-clock\"></i>\n\n        <strong>Tiempo</strong>\n\n        <span>{{ recipe.tiempo }}</span>\n      </div>\n\n      <div class=\"info-item\">\n        <i class=\"fas fa-users\"></i>\n\n        <strong>Porciones</strong>\n\n        <span>{{ recipe.porciones }}</span>\n      </div>\n\n      <div class=\"info-item\">\n        <i class=\"fas fa-chart-line\"></i>\n\n        <strong>Complejidad</strong>\n\n        <span>{{ recipe.complejidad }}</span>\n      </div>\n    </div>\n\n    <section class=\"ingredients-section\">\n      <h4><i class=\"fas fa-list\"></i> Ingredientes:</h4>\n\n      <div class=\"ingredients-list\">\n        <ul>\n          <li v-for=\"ingredient in recipe.ingredientes\" :key=\"ingredient\">\n            {{ ingredient }}\n          </li>\n        </ul>\n      </div>\n    </section>\n\n    <section class=\"instructions-section\">\n      <h4><i class=\"fas fa-tasks\"></i> Instrucciones:</h4>\n\n      <div class=\"instructions-list\">\n        <ol>\n          <li v-for=\"instruction in recipe.instrucciones\" :key=\"instruction\">\n            {{ instruction }}\n          </li>\n        </ol>\n      </div>\n    </section>\n\n    <section v-if=\"recipe.consejos\" class=\"tips-section\">\n      <h4><i class=\"fas fa-lightbulb\"></i> Consejos:</h4>\n\n      <div class=\"tips-content\">\n        <p>{{ recipe.consejos }}</p>\n      </div>\n    </section>\n  </article>\n</template>\n\n<script setup>\nimport { computed } from \"vue\";\n\nconst props = defineProps({\n  recipe: {\n    type: Object,\n\n    required: true,\n  },\n\n  mealType: {\n    type: String,\n\n    required: true,\n  },\n});\n\nconst mealIcons = {\n  desayuno: \"fas fa-sun\",\n\n  almuerzo: \"fas fa-utensils\",\n\n  merienda: \"fas fa-cookie\",\n\n  cena: \"fas fa-moon\",\n};\n\nconst mealLabels = {\n  desayuno: \"Desayuno\",\n\n  almuerzo: \"Almuerzo\",\n\n  merienda: \"Merienda\",\n\n  cena: \"Cena\",\n};\n\nconst mealIcon = computed(() => mealIcons[props.mealType] || \"fas fa-utensils\");\n\nconst mealTypeLabel = computed(\n  () => mealLabels[props.mealType] || props.mealType\n);\n</script>\n\n<style scoped>\n.recipe-card {\n  background: #f8f9fa;\n\n  border-radius: 10px;\n\n  padding: 25px;\n\n  border-left: 5px solid #667eea;\n\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.recipe-header h3 {\n  color: #333;\n\n  margin-bottom: 15px;\n\n  font-size: 1.4rem;\n\n  display: flex;\n\n  align-items: center;\n\n  gap: 10px;\n}\n\n.recipe-header p {\n  color: #666;\n\n  margin-bottom: 20px;\n}\n\n.recipe-info {\n  display: grid;\n\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n\n  gap: 15px;\n\n  margin: 20px 0;\n\n  padding: 15px;\n\n  background: white;\n\n  border-radius: 8px;\n}\n\n.info-item {\n  text-align: center;\n\n  padding: 10px;\n}\n\n.info-item i {\n  font-size: 1.5rem;\n\n  color: #667eea;\n\n  margin-bottom: 8px;\n\n  display: block;\n}\n\n.info-item strong {\n  display: block;\n\n  color: #333;\n\n  margin-bottom: 5px;\n\n  font-size: 0.9rem;\n}\n\n.info-item span {\n  color: #666;\n\n  font-size: 0.9rem;\n}\n\n.ingredients-section,\n.instructions-section,\n.tips-section {\n  margin: 20px 0;\n}\n\n.ingredients-section h4,\n.instructions-section h4,\n.tips-section h4 {\n  color: #667eea;\n\n  margin-bottom: 15px;\n\n  font-size: 1.2rem;\n\n  display: flex;\n\n  align-items: center;\n\n  gap: 8px;\n}\n\n.ingredients-list,\n.instructions-list,\n.tips-content {\n  background: white;\n\n  padding: 15px;\n\n  border-radius: 8px;\n}\n\n.ingredients-list ul,\n.instructions-list ol {\n  padding-left: 20px;\n\n  margin: 0;\n}\n\n.ingredients-list li,\n.instructions-list li {\n  margin-bottom: 8px;\n\n  line-height: 1.5;\n\n  color: #333;\n}\n\n.tips-content p {\n  color: #333;\n\n  line-height: 1.6;\n\n  margin: 0;\n}\n\n@media (max-width: 768px) {\n  .recipe-info {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (max-width: 480px) {\n  .recipe-info {\n    grid-template-columns: 1fr;\n  }\n\n  .recipe-card {\n    padding: 20px;\n  }\n}\n</style>\n","import { defineStore } from \"pinia\";\nimport { ref } from \"vue\";\nimport { useLocalStorage } from \"@/composables/useLocalStorage\";\n\nexport const useRecipesStore = defineStore(\"recipes\", () => {\n  const { getItem, setItem } = useLocalStorage();\n\n  const savedRecipes = ref(getItem(\"saved_recipes\", []));\n  const selectedRecipesForShopping = ref([]);\n\n  const saveRecipe = (recipe, type = \"individual\") => {\n    const recipeData = {\n      id: Date.now(),\n      type,\n      data: recipe,\n      createdAt: new Date().toISOString(),\n    };\n\n    savedRecipes.value.push(recipeData);\n    setItem(\"saved_recipes\", savedRecipes.value);\n  };\n\n  const deleteRecipe = (recipeId) => {\n    savedRecipes.value = savedRecipes.value.filter(\n      (recipe) => recipe.id !== recipeId\n    );\n    selectedRecipesForShopping.value = selectedRecipesForShopping.value.filter(\n      (id) => id !== recipeId\n    );\n    setItem(\"saved_recipes\", savedRecipes.value);\n  };\n\n  const clearAllRecipes = () => {\n    savedRecipes.value = [];\n    selectedRecipesForShopping.value = [];\n    setItem(\"saved_recipes\", savedRecipes.value);\n  };\n\n  const toggleRecipeSelection = (recipeId) => {\n    const index = selectedRecipesForShopping.value.indexOf(recipeId);\n    if (index > -1) {\n      selectedRecipesForShopping.value.splice(index, 1);\n    } else {\n      selectedRecipesForShopping.value.push(recipeId);\n    }\n  };\n\n  return {\n    savedRecipes,\n    selectedRecipesForShopping,\n    saveRecipe,\n    deleteRecipe,\n    clearAllRecipes,\n    toggleRecipeSelection,\n  };\n});\n","import { ref } from \"vue\";\nimport { useApiStore } from \"@/stores/api\";\nimport { useAppStore } from \"@/stores/app\";\nimport { useRecipesStore } from \"@/stores/recipes\";\nimport { useIngredientsStore } from \"@/stores/ingredients\";\n\nexport function useRecipeGenerator() {\n  const apiStore = useApiStore();\n  const appStore = useAppStore();\n  const recipesStore = useRecipesStore();\n  const ingredientsStore = useIngredientsStore();\n\n  const selectedMealType = ref(\"\");\n  const selectedCookingMethod = ref(\"\");\n  const generatedRecipe = ref(null);\n\n  const generateRecipe = async () => {\n    if (ingredientsStore.ingredients.length === 0) {\n      throw new Error(\n        \"Por favor, agrega ingredientes a tu inventario para generar una receta.\"\n      );\n    }\n\n    if (!selectedMealType.value) {\n      throw new Error(\n        \"Por favor, selecciona un tipo de comida antes de generar la receta.\"\n      );\n    }\n\n    if (!selectedCookingMethod.value) {\n      throw new Error(\n        \"Selecciona el método de cocción antes de generar la receta.\"\n      );\n    }\n\n    appStore.setLoading(true);\n\n    try {\n      const categorized = ingredientsStore.categorizeIngredients();\n      const allIngredients = ingredientsStore.ingredients.join(\", \");\n\n      let mealTypeGuidelines = \"\";\n      switch (selectedMealType.value) {\n        case \"desayuno\":\n          mealTypeGuidelines =\n            \"Para el desayuno, genera una receta típica y adecuada para la primera comida del día. Evita explícitamente el uso de carnes pesadas (como pollo, carne de res) o pescados como ingrediente principal, y preparaciones muy elaboradas o que requieran mucho tiempo. Prioriza opciones como cereales, huevos, frutas, o lácteos.\";\n          break;\n        case \"merienda\":\n          mealTypeGuidelines =\n            \"Para la merienda, debe ser una opción ligera, rápida y energizante para media tarde. Evita platos principales o que requieran cocción compleja.\";\n          break;\n        case \"almuerzo\":\n          mealTypeGuidelines =\n            \"Para el almuerzo, genera una comida principal y sustanciosa. Debe ser una receta completa que pueda incluir proteínas, carbohidratos y vegetales.\";\n          break;\n        case \"cena\":\n          mealTypeGuidelines =\n            \"Para la cena, genera una comida balanceada, nutritiva y adecuada para la última comida del día. Puede ser ligeramente más ligera que el almuerzo.\";\n          break;\n      }\n\n      const cookingMethodGuidelines = `El método de cocción seleccionado por el usuario es: ${selectedCookingMethod.value}. Adapta la receta y las instrucciones para que sean adecuadas para este método.`;\n\n      const prompt = `\n        Eres un chef experto y nutricionista con un profundo conocimiento de dietas balanceadas y costumbres culinarias de Argentina. Tu objetivo es combinar la tradición culinaria local con principios nutricionales modernos para crear recetas y consejos que sean saludables, deliciosos y culturalmente apropiados.\n        Necesito que generes una única receta para la comida de ${selectedMealType.value}.\n\n        Los ingredientes que tengo disponibles en mi inventario son: ${allIngredients}.\n        ${mealTypeGuidelines}\n        ${cookingMethodGuidelines}\n\n        Para la receta, proporciona:\n        - **Nombre del plato**\n        - **Lista completa de ingredientes** con cantidades aproximadas (puedes agregar ingredientes básicos como sal, pimienta, aceite, especias, si son necesarios y no están explícitamente en la lista original).\n        - **Instrucciones** paso a paso, claras y concisas.\n        - **Tiempo** de preparación (ej. \"20 minutos\").\n        - **Porciones** (ej. \"1 persona\", \"2 personas\", \"6 personas\", etc).\n        - **Nivel de complejidad** (Fácil/Intermedio/Difícil).\n        - **Consejos** adicionales (opcional, uno o varios si aplica).\n\n        Asegúrate de que la receta sea coherente, balanceada, nutritiva y que use los ingredientes de mi inventario de manera inteligente, no es necesario usar todos los ingredientes.\n        Si un ingrediente es esencial para el tipo de comida y no está en el inventario, puedes incluirlo pero prioriza el uso de lo que tengo.\n\n        IMPORTANTE: Responde ÚNICAMENTE con un JSON válido, sin texto adicional antes o después. No incluyas explicaciones o texto introductorio/final. Usa esta estructura exacta:\n        {\n            \"nombre\": \"Nombre del plato\",\n            \"ingredientes\": [\"ingrediente 1 - cantidad\", \"ingrediente 2 - cantidad\"],\n            \"instrucciones\": [\"paso 1\", \"paso 2\"],\n            \"tiempo\": \"X minutos\",\n            \"porciones\": \"X personas\",\n            \"complejidad\": \"Fácil\",\n            \"consejos\": \"Consejos adicionales (opcional)\"\n        }\n      `;\n\n      const response = await apiStore.callGeminiAPI(prompt);\n\n      // Limpiar la respuesta\n      let cleanResponse = response.trim();\n      if (cleanResponse.startsWith(\"```json\")) {\n        cleanResponse = cleanResponse\n          .replace(/```json\\n?/, \"\")\n          .replace(/\\n?```$/, \"\");\n      }\n      if (cleanResponse.startsWith(\"```\")) {\n        cleanResponse = cleanResponse\n          .replace(/```\\n?/, \"\")\n          .replace(/\\n?```$/, \"\");\n      }\n\n      const recipe = JSON.parse(cleanResponse);\n      recipe.id = Date.now().toString();\n      recipe.mealType = selectedMealType.value;\n      recipe.cookingMethod = selectedCookingMethod.value;\n\n      generatedRecipe.value = recipe;\n      // El guardado ahora se realiza solo desde el botón en RecipeCreator.vue\n      return recipe;\n    } catch (error) {\n      console.error(\"Error al generar la receta:\", error);\n      throw error;\n    } finally {\n      appStore.setLoading(false);\n    }\n  };\n\n  return {\n    selectedMealType,\n    selectedCookingMethod,\n    generatedRecipe,\n    generateRecipe,\n  };\n}\n","<template>\n  <div class=\"recipe-creator\">\n    <header class=\"section-header\">\n      <h2><i class=\"fas fa-magic\"></i> Creador de Recetas Inteligente</h2>\n      <p>Administra tus ingredientes y genera recetas personalizadas con IA</p>\n    </header>\n\n    <IngredientsList />\n\n    <MealTypeSelector\n      v-model=\"recipeGenerator.selectedMealType.value\"\n      class=\"meal-type-section\"\n    />\n\n    <div class=\"cooking-method-section\">\n      <label for=\"cookingMethod\" class=\"cooking-label\"\n        >Método de cocción:</label\n      >\n      <select\n        id=\"cookingMethod\"\n        v-model=\"recipeGenerator.selectedCookingMethod.value\"\n        aria-label=\"Selecciona el método de cocción\"\n        class=\"cooking-select\"\n      >\n        <option value=\"\">Selecciona...</option>\n        <option value=\"Freidora de Aire\">Freidora de Aire</option>\n        <option value=\"Horno\">Horno</option>\n        <option value=\"Microondas\">Microondas</option>\n        <option value=\"Parrilla\">Parrilla</option>\n        <option value=\"Olla\">Olla</option>\n        <option value=\"Sartén\">Sartén</option>\n        <option value=\"Vapor\">Vapor</option>\n      </select>\n    </div>\n\n    <button\n      class=\"generate-btn\"\n      aria-label=\"Generar receta\"\n      @click=\"handleGenerateRecipe\"\n      :disabled=\"appStore.isLoading\"\n      ref=\"generateBtn\"\n    >\n      <i class=\"fas fa-magic\"></i>\n      {{ appStore.isLoading ? \"Generando...\" : \"Generar Receta\" }}\n    </button>\n    <div\n      v-if=\"errorMessage\"\n      class=\"error-message\"\n      aria-live=\"assertive\"\n      tabindex=\"-1\"\n      ref=\"errorRef\"\n    >\n      {{ errorMessage }}\n    </div>\n\n    <RecipeCard\n      v-if=\"recipeGenerator.generatedRecipe.value\"\n      :recipe=\"recipeGenerator.generatedRecipe.value\"\n      :meal-type=\"recipeGenerator.selectedMealType.value\"\n      class=\"recipe-result\"\n    />\n    <button\n      v-if=\"recipeGenerator.generatedRecipe.value\"\n      class=\"save-btn\"\n      @click=\"handleSaveRecipe\"\n      style=\"margin-top: 16px\"\n    >\n      <i class=\"fas fa-save\"></i>\n      Guardar Receta\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref, nextTick } from \"vue\";\nimport IngredientsList from \"@/components/features/IngredientsList.vue\";\nimport MealTypeSelector from \"@/components/ui/MealTypeSelector.vue\";\nimport RecipeCard from \"@/components/ui/RecipeCard.vue\";\nimport { useRecipeGenerator } from \"@/composables/useRecipeGenerator\";\nimport { useIngredientsStore } from \"@/stores/ingredients\";\nimport { useAppStore } from \"@/stores/app\";\nimport { useApiStore } from \"@/stores/api\";\n\nconst recipeGenerator = useRecipeGenerator();\nconst ingredientsStore = useIngredientsStore();\nconst appStore = useAppStore();\nconst apiStore = useApiStore();\n\nconst canGenerateRecipe = computed(\n  () =>\n    ingredientsStore.ingredients.length > 0 &&\n    recipeGenerator.selectedMealType.value &&\n    apiStore.hasApiKey\n);\n\nconst errorMessage = ref(\"\");\nconst errorRef = ref(null);\nconst generateBtn = ref(null);\n\nconst handleGenerateRecipe = async () => {\n  if (appStore.isLoading) return;\n  if (!apiStore.hasApiKey) {\n    errorMessage.value =\n      \"Debes ingresar una API Key válida antes de generar una receta.\";\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n    return;\n  }\n  if (ingredientsStore.ingredients.length === 0) {\n    errorMessage.value =\n      \"Agrega al menos un ingrediente antes de generar una receta.\";\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n    return;\n  }\n  if (!recipeGenerator.selectedMealType.value) {\n    errorMessage.value =\n      \"Selecciona un tipo de comida antes de generar la receta.\";\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n    return;\n  }\n  if (!recipeGenerator.selectedCookingMethod.value) {\n    errorMessage.value =\n      \"Selecciona el método de cocción antes de generar la receta.\";\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n    return;\n  }\n  errorMessage.value = \"\";\n  try {\n    await recipeGenerator.generateRecipe();\n  } catch (error) {\n    errorMessage.value = error.message;\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n  }\n};\n\nimport { useRecipesStore } from \"@/stores/recipes\";\nconst recipesStore = useRecipesStore();\n\nconst handleSaveRecipe = () => {\n  const receta = recipeGenerator.generatedRecipe.value;\n  if (!receta) return;\n  recipesStore.saveRecipe(receta);\n  alert(\"Receta guardada correctamente.\");\n};\n</script>\n\n<style scoped>\n.cooking-method-section {\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.cooking-label {\n  font-weight: 500;\n  color: #333;\n  margin-bottom: 4px;\n}\n.cooking-select {\n  padding: 10px 16px;\n  border-radius: 8px;\n  border: 2px solid #e9ecef;\n  font-size: 1rem;\n  background: #fff;\n  color: #333;\n  transition: border-color 0.3s ease;\n}\n.cooking-select:focus {\n  outline: none;\n  border-color: #667eea;\n}\n.recipe-creator {\n  display: flex;\n  flex-direction: column;\n  gap: 25px;\n}\n\n.section-header h2 {\n  color: #333;\n  margin-bottom: 10px;\n  font-size: 1.8rem;\n}\n\n.section-header p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 1.1rem;\n}\n\n.meal-type-section {\n  margin: 25px 0;\n}\n\n.generate-btn {\n  width: 100%;\n  padding: 15px 30px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.1rem;\n  cursor: pointer;\n  transition: transform 0.3s ease;\n  margin: 20px 0;\n}\n\n.save-btn {\n  width: 100%;\n  padding: 12px 30px;\n  background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.1rem;\n  cursor: pointer;\n  margin-bottom: 10px;\n  margin-top: 0;\n  transition: transform 0.3s ease;\n}\n.save-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n}\n.save-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n.save-btn i {\n  margin-right: 10px;\n}\n\n.generate-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n}\n\n.error-message {\n  color: #dc3545;\n  background: #fff3f3;\n  border: 1px solid #dc3545;\n  border-radius: 6px;\n  padding: 8px 12px;\n  margin-top: 8px;\n  font-size: 1rem;\n  outline: none;\n}\n\n.generate-btn i {\n  margin-right: 10px;\n}\n\n.recipe-result {\n  margin-top: 30px;\n  animation: fadeIn 0.5s ease;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n</style>\n","<template>\n  <section class=\"recipe-selection\">\n    <header class=\"section-header\">\n      <h3>Recetas Guardadas:</h3>\n      <button\n        class=\"clear-btn\"\n        title=\"Eliminar todas las recetas guardadas\"\n        aria-label=\"Eliminar todas las recetas guardadas\"\n        @click=\"handleClearAll\"\n        ref=\"clearBtn\"\n      >\n        <i class=\"fas fa-trash-alt\"></i> Eliminar Todas\n      </button>\n      <div\n        v-if=\"errorMessage\"\n        class=\"error-message\"\n        aria-live=\"assertive\"\n        tabindex=\"-1\"\n        ref=\"errorRef\"\n      >\n        {{ errorMessage }}\n      </div>\n    </header>\n\n    <ul class=\"saved-recipes-list\">\n      <li v-if=\"recipesStore.savedRecipes.length === 0\" class=\"no-recipes\">\n        <i class=\"fas fa-book-dead no-recipes-icon\"></i>\n        <p>No hay recetas guardadas.<br />Genera algunas recetas primero.</p>\n      </li>\n\n      <li\n        v-for=\"recipe in recipesStore.savedRecipes\"\n        :key=\"recipe.id\"\n        :class=\"['recipe-item', { selected: isSelected(recipe.id) }]\"\n        :data-recipe-id=\"recipe.id\"\n      >\n        <div class=\"recipe-info-compact\">\n          <div class=\"recipe-name\">{{ recipe.data.nombre }}</div>\n          <div class=\"recipe-meta\">\n            <i class=\"fas fa-calendar\"></i>\n            {{ formatDate(recipe.createdAt) }} • {{ recipe.data.tiempo }} •\n            {{ recipe.data.porciones }}\n          </div>\n        </div>\n\n        <div class=\"recipe-actions\">\n          <button\n            class=\"recipe-select-btn\"\n            :aria-label=\"\n              isSelected(recipe.id)\n                ? 'Deseleccionar receta'\n                : 'Seleccionar receta'\n            \"\n            @click=\"recipesStore.toggleRecipeSelection(recipe.id)\"\n          >\n            {{ isSelected(recipe.id) ? \"Deseleccionar\" : \"Seleccionar\" }}\n          </button>\n          <button\n            class=\"recipe-delete-btn\"\n            title=\"Eliminar receta\"\n            :aria-label=\"`Eliminar receta ${recipe.data.nombre}`\"\n            @click=\"handleDeleteRecipe(recipe.id)\"\n          >\n            <i class=\"fas fa-trash\"></i>\n          </button>\n          <button\n            class=\"recipe-view-btn\"\n            title=\"Ver receta\"\n            :aria-label=\"`Ver receta ${recipe.data.nombre}`\"\n            @click=\"handleViewRecipe(recipe)\"\n          >\n            <i class=\"fas fa-eye\"></i> Ver\n          </button>\n        </div>\n      </li>\n    </ul>\n    <transition name=\"modal-fade\">\n      <div\n        v-if=\"showModal\"\n        class=\"modal-overlay blur-bg\"\n        @click.self=\"closeModal\"\n        tabindex=\"-1\"\n      >\n        <div class=\"modal-content\" ref=\"modalContent\">\n          <button class=\"close-modal-btn\" @click=\"closeModal\" ref=\"closeBtn\">\n            Cerrar\n          </button>\n          <RecipeCard\n            :recipe=\"selectedRecipe.data\"\n            :meal-type=\"selectedRecipe.data.mealType\"\n          />\n          <div class=\"copy-actions\">\n            <button class=\"copy-btn\" @click=\"copyIngredients\">\n              <i class=\"fas fa-copy\"></i> Copiar ingredientes\n            </button>\n            <button class=\"copy-btn\" @click=\"copyInstructions\">\n              <i class=\"fas fa-copy\"></i> Copiar instrucciones\n            </button>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </section>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch, nextTick } from \"vue\";\nimport { useRecipesStore } from \"@/stores/recipes\";\nimport RecipeCard from \"@/components/ui/RecipeCard.vue\";\n\nconst recipesStore = useRecipesStore();\n\nconst isSelected = (recipeId) => {\n  return recipesStore.selectedRecipesForShopping.includes(recipeId);\n};\n\nconst formatDate = (dateString) => {\n  return new Date(dateString).toLocaleDateString(\"es-ES\");\n};\n\nconst handleDeleteRecipe = (recipeId) => {\n  const recipe = recipesStore.savedRecipes.find((r) => r.id === recipeId);\n  if (\n    confirm(\n      `¿Estás seguro de que quieres eliminar la receta \"${recipe?.data.nombre}\"?`\n    )\n  ) {\n    recipesStore.deleteRecipe(recipeId);\n  }\n};\n\nconst errorMessage = ref(\"\");\nconst errorRef = ref(null);\nconst handleClearAll = () => {\n  if (recipesStore.savedRecipes.length === 0) {\n    errorMessage.value = \"No hay recetas guardadas para eliminar.\";\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n    return;\n  }\n  errorMessage.value = \"\";\n  if (\n    confirm(\n      \"¿Estás seguro de que quieres eliminar todas las recetas guardadas?\"\n    )\n  ) {\n    recipesStore.clearAllRecipes();\n  }\n};\n\nconst showModal = ref(false);\nconst selectedRecipe = ref(null);\nconst modalContent = ref(null);\nconst closeBtn = ref(null);\n\nconst handleViewRecipe = (recipe) => {\n  selectedRecipe.value = recipe;\n  showModal.value = true;\n};\n\nconst closeModal = () => {\n  showModal.value = false;\n  selectedRecipe.value = null;\n};\n\nconst copyIngredients = () => {\n  if (!selectedRecipe.value) return;\n  const ingredients =\n    selectedRecipe.value.data.ingredientes\n      ?.map((ing) =>\n        ing.nombre\n          ? `${ing.cantidad || \"\"} ${ing.unidad || \"\"} ${ing.nombre}`.trim()\n          : ing\n      )\n      .join(\"\\n\") || \"\";\n  navigator.clipboard.writeText(ingredients);\n  alert(\"Ingredientes copiados al portapapeles.\");\n};\n\nconst copyInstructions = () => {\n  if (!selectedRecipe.value) return;\n  const instructions =\n    selectedRecipe.value.data.instrucciones?.join(\"\\n\") || \"\";\n  navigator.clipboard.writeText(instructions);\n  alert(\"Instrucciones copiadas al portapapeles.\");\n};\n\nconst handleKeyDown = (e) => {\n  if (showModal.value && e.key === \"Escape\") {\n    closeModal();\n  }\n};\n\nonMounted(() => {\n  window.addEventListener(\"keydown\", handleKeyDown);\n  return () => window.removeEventListener(\"keydown\", handleKeyDown);\n});\n\nwatch(showModal, (val) => {\n  if (val && closeBtn.value) closeBtn.value.focus();\n});\n</script>\n\n<style scoped>\n.recipe-selection {\n  margin-bottom: 25px;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.section-header h3 {\n  color: #333;\n  margin: 0;\n  font-size: 1.2rem;\n}\n\n.clear-btn {\n  padding: 8px 15px;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.clear-btn:hover:not(:disabled) {\n  background: #c82333;\n  transform: translateY(-1px);\n}\n\n.clear-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.clear-btn i {\n  font-size: 0.8rem;\n}\n\n.saved-recipes-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  max-height: 300px;\n  overflow-y: auto;\n  padding: 15px;\n  background: white;\n  border-radius: 8px;\n  border: 2px solid #e9ecef;\n  list-style: none;\n  margin: 0;\n}\n\n.no-recipes {\n  text-align: center;\n  color: #666;\n  font-style: italic;\n  padding: 28px 10px 18px 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n\n.no-recipes-icon {\n  font-size: 3.2rem;\n  color: #e9ecef;\n  margin-bottom: 8px;\n}\n\n.no-recipes p {\n  margin: 0;\n  font-size: 1.1rem;\n}\n\n.recipe-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 15px;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border: 1px solid #dee2e6;\n  transition: all 0.3s ease;\n}\n\n.recipe-item:hover {\n  background: #e9ecef;\n  transform: translateY(-1px);\n}\n\n.recipe-item.selected {\n  background: #667eea;\n  color: white;\n  border-color: #5a6fd8;\n}\n\n.recipe-info-compact {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\n.recipe-name {\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n\n.recipe-meta {\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n\n.recipe-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.recipe-select-btn {\n  padding: 6px 12px;\n  background: #667eea;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: background 0.3s ease;\n}\n\n.recipe-select-btn:hover {\n  background: #5a6fd8;\n}\n\n.recipe-item.selected .recipe-select-btn {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.recipe-item.selected .recipe-select-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.recipe-delete-btn {\n  padding: 6px 8px;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  transition: background 0.3s ease;\n}\n\n.recipe-delete-btn:hover {\n  background: #c82333;\n}\n\n.recipe-view-btn {\n  padding: 8px 16px;\n  background: #28a745;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: background 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  font-weight: 500;\n  box-shadow: 0 2px 8px rgba(40, 167, 69, 0.08);\n}\n.recipe-view-btn:hover {\n  background: #218838;\n  transform: translateY(-1px);\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  overflow: auto;\n}\n.modal-content {\n  background: #fff;\n  border-radius: 18px;\n  padding: 36px 32px 28px 32px;\n  box-shadow: 0 12px 40px rgba(40, 40, 40, 0.18);\n  max-width: 540px;\n  width: 95vw;\n  position: relative;\n  max-height: 90vh;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  animation: modal-pop 0.25s;\n}\n.close-modal-btn {\n  position: absolute;\n  top: 18px;\n  right: 18px;\n  background: #dc3545;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 8px 16px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 500;\n  z-index: 2;\n  box-shadow: 0 2px 8px rgba(220, 53, 69, 0.08);\n}\n.close-modal-btn:hover {\n  background: #c82333;\n  transform: translateY(-1px);\n}\n.close-modal-btn:focus {\n  outline: 2px solid #667eea;\n}\n@keyframes modal-pop {\n  0% {\n    transform: scale(0.95);\n    opacity: 0.7;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n@media (max-width: 768px) {\n  .modal-content {\n    max-width: 98vw;\n    padding: 18px 8px 12px 8px;\n    max-height: 98vh;\n  }\n  .close-modal-btn {\n    top: 8px;\n    right: 8px;\n    padding: 6px 10px;\n    font-size: 0.9rem;\n  }\n  .recipe-view-btn {\n    font-size: 0.9rem;\n    padding: 6px 10px;\n  }\n  .copy-actions {\n    flex-direction: column;\n    gap: 8px;\n    margin-top: 12px;\n    align-items: stretch;\n  }\n  .recipe-item {\n    flex-direction: column;\n    align-items: stretch;\n    padding: 12px 8px;\n  }\n  .recipe-info-compact {\n    margin-bottom: 10px;\n  }\n  .recipe-actions {\n    flex-direction: row;\n    justify-content: center;\n    gap: 8px;\n    width: 100%;\n  }\n  .recipe-select-btn,\n  .recipe-delete-btn,\n  .recipe-view-btn {\n    width: 100%;\n    font-size: 0.95rem;\n    padding: 8px 0;\n  }\n}\n@media (max-width: 500px) {\n  .recipe-actions {\n    flex-direction: column;\n    gap: 6px;\n    width: 100%;\n    justify-content: stretch;\n    align-items: stretch;\n  }\n  .recipe-select-btn,\n  .recipe-delete-btn,\n  .recipe-view-btn {\n    width: 100%;\n    padding: 10px 0;\n    font-size: 1rem;\n  }\n}\n@media (max-width: 400px) {\n  .section-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  .clear-btn {\n    width: 100%;\n    margin-top: 8px;\n    font-size: 1rem;\n    padding: 10px 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n  }\n}\n\n.modal-fade-enter-active,\n.modal-fade-leave-active {\n  transition: opacity 0.25s;\n}\n.modal-fade-enter-from,\n.modal-fade-leave-to {\n  opacity: 0;\n}\n\n.blur-bg {\n  backdrop-filter: blur(4px);\n}\n.copy-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 18px;\n  justify-content: flex-end;\n}\n.copy-btn {\n  background: #667eea;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 7px 14px;\n  cursor: pointer;\n  font-size: 0.95rem;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  transition: background 0.2s;\n}\n.copy-btn:hover {\n  background: #5a6fd8;\n}\n.error-message {\n  color: #dc3545;\n  background: #fff3f3;\n  border: 1px solid #dc3545;\n  border-radius: 6px;\n  padding: 8px 12px;\n  margin-top: 8px;\n  font-size: 1rem;\n  outline: none;\n}\n</style>\n","<template>\n  <section class=\"shopping-options\">\n    <h3>Opciones de Lista:</h3>\n    <div role=\"group\" aria-labelledby=\"shopping-options-heading\">\n      <div class=\"option-group\">\n        <label class=\"checkbox-label\">\n          <input\n            type=\"checkbox\"\n            :checked=\"includeBasics\"\n            @change=\"$emit('update:includeBasics', $event.target.checked)\"\n          />\n          <span class=\"checkmark\"></span>\n          Incluir ingredientes básicos (sal, aceite, especias)\n        </label>\n      </div>\n\n      <div class=\"option-group\">\n        <label class=\"checkbox-label\">\n          <input\n            type=\"checkbox\"\n            :checked=\"groupByCategory\"\n            @change=\"$emit('update:groupByCategory', $event.target.checked)\"\n          />\n          <span class=\"checkmark\"></span>\n          Agrupar por categorías (carnes, vegetales, etc.)\n        </label>\n      </div>\n\n      <div class=\"option-group\">\n        <label class=\"checkbox-label\">\n          <input\n            type=\"checkbox\"\n            :checked=\"excludeInventory\"\n            @change=\"$emit('update:excludeInventory', $event.target.checked)\"\n          />\n          <span class=\"checkmark\"></span>\n          Excluir ingredientes que ya tengo\n        </label>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup>\ndefineProps({\n  includeBasics: {\n    type: Boolean,\n    default: true,\n  },\n  groupByCategory: {\n    type: Boolean,\n    default: true,\n  },\n  excludeInventory: {\n    type: Boolean,\n    default: true,\n  },\n});\n\ndefineEmits([\n  \"update:includeBasics\",\n  \"update:groupByCategory\",\n  \"update:excludeInventory\",\n]);\n</script>\n\n<style scoped>\n.shopping-options h3 {\n  margin-bottom: 15px;\n  color: #333;\n  font-size: 1.2rem;\n}\n\n.option-group {\n  margin-bottom: 15px;\n}\n\n.checkbox-label {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  font-size: 1rem;\n  color: #333;\n  user-select: none;\n}\n\n.checkbox-label input[type=\"checkbox\"] {\n  display: none;\n}\n\n.checkmark {\n  width: 20px;\n  height: 20px;\n  background: white;\n  border: 2px solid #dee2e6;\n  border-radius: 4px;\n  margin-right: 12px;\n  position: relative;\n  transition: all 0.3s ease;\n}\n\n.checkbox-label input[type=\"checkbox\"]:checked + .checkmark {\n  background: #667eea;\n  border-color: #667eea;\n}\n\n.checkbox-label input[type=\"checkbox\"]:checked + .checkmark::after {\n  content: \"✓\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n}\n\n.checkbox-label:hover .checkmark {\n  border-color: #667eea;\n}\n</style>\n","<template>\n  <div class=\"shopping-list-result\">\n    <div class=\"shopping-summary\">\n      <h3><i class=\"fas fa-chart-pie\"></i> Resumen de tu Lista de Compras</h3>\n      <div class=\"summary-stats\">\n        <div class=\"stat-item\">\n          <span class=\"stat-number\">{{ shoppingList.resumen.totalItems }}</span>\n          <div class=\"stat-label\">Productos totales</div>\n        </div>\n        <div v-if=\"groupByCategory\" class=\"stat-item\">\n          <span class=\"stat-number\">{{ shoppingList.resumen.categorias }}</span>\n          <div class=\"stat-label\">Categorías</div>\n        </div>\n        <div class=\"stat-item\">\n          <span class=\"stat-number\">{{\n            shoppingList.resumen.recetasIncluidas\n          }}</span>\n          <div class=\"stat-label\">Recetas incluidas</div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"shopping-list-card\">\n      <h3>\n        <i class=\"fas fa-list-alt\"></i> Lista de Compras{{\n          groupByCategory ? \" por Categorías\" : \"\"\n        }}\n      </h3>\n\n      <!-- Grouped by categories -->\n      <div v-if=\"groupByCategory && shoppingList.categorias\">\n        <div\n          v-for=\"[key, categoria] in Object.entries(shoppingList.categorias)\"\n          :key=\"key\"\n          class=\"shopping-category\"\n        >\n          <h4 v-if=\"categoria.items && categoria.items.length > 0\">\n            <i :class=\"categoria.icono\"></i> {{ categoria.nombre }}\n          </h4>\n          <div\n            v-if=\"categoria.items && categoria.items.length > 0\"\n            class=\"shopping-items\"\n          >\n            <div\n              v-for=\"(item, index) in categoria.items\"\n              :key=\"`${key}-${index}`\"\n              :class=\"[\n                'shopping-item',\n                { checked: checkedItems.has(`${key}-${index}`) },\n              ]\"\n              :data-item=\"`${key}-${index}`\"\n            >\n              <input\n                type=\"checkbox\"\n                class=\"shopping-checkbox\"\n                :checked=\"checkedItems.has(`${key}-${index}`)\"\n                @change=\"toggleItem(`${key}-${index}`)\"\n              />\n              <span class=\"shopping-item-text\">{{ item }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Simple list -->\n      <div v-else-if=\"shoppingList.items\" class=\"shopping-category\">\n        <div class=\"shopping-items\">\n          <div\n            v-for=\"(item, index) in shoppingList.items\"\n            :key=\"`item-${index}`\"\n            :class=\"[\n              'shopping-item',\n              { checked: checkedItems.has(`item-${index}`) },\n            ]\"\n            :data-item=\"`item-${index}`\"\n          >\n            <input\n              type=\"checkbox\"\n              class=\"shopping-checkbox\"\n              :checked=\"checkedItems.has(`item-${index}`)\"\n              @change=\"toggleItem(`item-${index}`)\"\n            />\n            <span class=\"shopping-item-text\">{{ item }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"shopping-actions\">\n        <button class=\"action-btn primary\" @click=\"exportShoppingList\">\n          <i class=\"fas fa-download\"></i> Descargar Lista\n        </button>\n        <button class=\"action-btn secondary\" @click=\"$emit('clear')\">\n          <i class=\"fas fa-trash\"></i> Limpiar Lista\n        </button>\n        <button class=\"action-btn success\" @click=\"markAllCompleted\">\n          <i class=\"fas fa-check-double\"></i> Marcar Todo\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\n\nconst props = defineProps({\n  shoppingList: {\n    type: Object,\n    required: true,\n  },\n  groupByCategory: {\n    type: Boolean,\n    default: true,\n  },\n});\n\ndefineEmits([\"clear\"]);\n\nconst checkedItems = ref(new Set());\n\nconst toggleItem = (itemId) => {\n  if (checkedItems.value.has(itemId)) {\n    checkedItems.value.delete(itemId);\n  } else {\n    checkedItems.value.add(itemId);\n  }\n};\n\nconst markAllCompleted = () => {\n  const allItems = getAllItemIds();\n  allItems.forEach((itemId) => checkedItems.value.add(itemId));\n};\n\nconst getAllItemIds = () => {\n  const items = [];\n\n  if (props.groupByCategory && props.shoppingList.categorias) {\n    Object.entries(props.shoppingList.categorias).forEach(\n      ([key, categoria]) => {\n        if (categoria.items) {\n          categoria.items.forEach((_, index) => {\n            items.push(`${key}-${index}`);\n          });\n        }\n      }\n    );\n  } else if (props.shoppingList.items) {\n    props.shoppingList.items.forEach((_, index) => {\n      items.push(`item-${index}`);\n    });\n  }\n\n  return items;\n};\n\nconst exportShoppingList = () => {\n  let exportText = \"=== LISTA DE COMPRAS ===\\n\\n\";\n  exportText += `Generada el: ${new Date().toLocaleDateString()}\\n`;\n  exportText += `Total de productos: ${props.shoppingList.resumen.totalItems}\\n`;\n  exportText += `Productos completados: ${checkedItems.value.size}\\n\\n`;\n\n  exportText += \"PRODUCTOS PENDIENTES:\\n\";\n\n  if (props.groupByCategory && props.shoppingList.categorias) {\n    Object.entries(props.shoppingList.categorias).forEach(\n      ([key, categoria]) => {\n        if (categoria.items && categoria.items.length > 0) {\n          exportText += `\\n${categoria.nombre.toUpperCase()}:\\n`;\n          categoria.items.forEach((item, index) => {\n            const itemId = `${key}-${index}`;\n            if (!checkedItems.value.has(itemId)) {\n              exportText += `☐ ${item}\\n`;\n            }\n          });\n        }\n      }\n    );\n  } else if (props.shoppingList.items) {\n    props.shoppingList.items.forEach((item, index) => {\n      const itemId = `item-${index}`;\n      if (!checkedItems.value.has(itemId)) {\n        exportText += `☐ ${item}\\n`;\n      }\n    });\n  }\n\n  if (checkedItems.value.size > 0) {\n    exportText += \"\\nPRODUCTOS COMPLETADOS:\\n\";\n\n    if (props.groupByCategory && props.shoppingList.categorias) {\n      Object.entries(props.shoppingList.categorias).forEach(\n        ([key, categoria]) => {\n          if (categoria.items && categoria.items.length > 0) {\n            const completedInCategory = categoria.items.filter((_, index) =>\n              checkedItems.value.has(`${key}-${index}`)\n            );\n\n            if (completedInCategory.length > 0) {\n              exportText += `\\n${categoria.nombre.toUpperCase()}:\\n`;\n              categoria.items.forEach((item, index) => {\n                const itemId = `${key}-${index}`;\n                if (checkedItems.value.has(itemId)) {\n                  exportText += `☑ ${item}\\n`;\n                }\n              });\n            }\n          }\n        }\n      );\n    } else if (props.shoppingList.items) {\n      props.shoppingList.items.forEach((item, index) => {\n        const itemId = `item-${index}`;\n        if (checkedItems.value.has(itemId)) {\n          exportText += `☑ ${item}\\n`;\n        }\n      });\n    }\n  }\n\n  // Create and download file\n  const blob = new Blob([exportText], { type: \"text/plain\" });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = `lista-compras-${new Date().toISOString().split(\"T\")[0]}.txt`;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n\n  alert(\"Lista de compras exportada exitosamente\");\n};\n</script>\n\n<style scoped>\n.shopping-list-result {\n  margin-top: 20px;\n}\n\n.shopping-summary {\n  background: #e8f5e8;\n  padding: 20px;\n  border-radius: 10px;\n  margin-bottom: 20px;\n  text-align: center;\n}\n\n.shopping-summary h3 {\n  color: #333;\n  margin-bottom: 15px;\n  font-size: 1.3rem;\n}\n\n.summary-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 15px;\n  margin-top: 15px;\n}\n\n.stat-item {\n  background: white;\n  padding: 15px;\n  border-radius: 8px;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.stat-number {\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #28a745;\n  display: block;\n}\n\n.stat-label {\n  font-size: 0.9rem;\n  color: #666;\n  margin-top: 5px;\n}\n\n.shopping-list-card {\n  background: white;\n  border-radius: 10px;\n  padding: 25px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  border-left: 5px solid #28a745;\n}\n\n.shopping-list-card > h3 {\n  color: #333;\n  margin-bottom: 20px;\n  font-size: 1.3rem;\n}\n\n.shopping-category {\n  margin-bottom: 25px;\n}\n\n.shopping-category h4 {\n  color: #28a745;\n  margin-bottom: 15px;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.shopping-items {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 10px;\n}\n\n.shopping-item {\n  display: flex;\n  align-items: center;\n  padding: 10px 15px;\n  background: #f8f9fa;\n  border-radius: 8px;\n  border: 1px solid #e9ecef;\n  transition: all 0.3s ease;\n}\n\n.shopping-item:hover {\n  background: #e9ecef;\n  transform: translateY(-1px);\n}\n\n.shopping-item.checked {\n  background: #d4edda;\n  border-color: #c3e6cb;\n  text-decoration: line-through;\n  opacity: 0.7;\n}\n\n.shopping-checkbox {\n  margin-right: 12px;\n  cursor: pointer;\n}\n\n.shopping-item-text {\n  flex: 1;\n  font-size: 0.95rem;\n}\n\n.shopping-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 20px;\n  flex-wrap: wrap;\n}\n\n.action-btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.95rem;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.action-btn.primary {\n  background: #667eea;\n  color: white;\n}\n\n.action-btn.primary:hover {\n  background: #5a6fd8;\n}\n\n.action-btn.secondary {\n  background: #6c757d;\n  color: white;\n}\n\n.action-btn.secondary:hover {\n  background: #5a6268;\n}\n\n.action-btn.success {\n  background: #28a745;\n  color: white;\n}\n\n.action-btn.success:hover {\n  background: #218838;\n}\n\n@media (max-width: 768px) {\n  .shopping-items {\n    grid-template-columns: 1fr;\n  }\n\n  .summary-stats {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .shopping-actions {\n    flex-direction: column;\n  }\n\n  .action-btn {\n    justify-content: center;\n  }\n}\n</style>\n","import { useApiStore } from \"@/stores/api\";\nimport { useAppStore } from \"@/stores/app\";\nimport { useRecipesStore } from \"@/stores/recipes\";\nimport { useIngredientsStore } from \"@/stores/ingredients\";\n\nexport function useShoppingListGenerator() {\n  const apiStore = useApiStore();\n  const appStore = useAppStore();\n  const recipesStore = useRecipesStore();\n  const ingredientsStore = useIngredientsStore();\n\n  const generateShoppingList = async (options) => {\n    if (recipesStore.selectedRecipesForShopping.length === 0) {\n      throw new Error(\n        \"Por favor selecciona al menos una receta para generar la lista de compras\"\n      );\n    }\n\n    appStore.setLoading(true);\n\n    try {\n      // Get selected recipes\n      const selectedRecipes = recipesStore.savedRecipes.filter((recipe) =>\n        recipesStore.selectedRecipesForShopping.includes(recipe.id)\n      );\n\n      // Extract all ingredients from selected recipes\n      let allIngredients = [];\n      selectedRecipes.forEach((recipe) => {\n        if (recipe.data.ingredientes) {\n          allIngredients = allIngredients.concat(recipe.data.ingredientes);\n        }\n      });\n\n      const prompt = `\n        Eres un asistente experto en compras de supermercado. Necesito que generes una lista de compras inteligente basada en los siguientes ingredientes de recetas:\n\n        INGREDIENTES DE LAS RECETAS:\n        ${allIngredients.map((ing, index) => `${index + 1}. ${ing}`).join(\"\\n\")}\n\n        ${options.excludeInventory ? `\\nMIS INGREDIENTES ACTUALES (excluir estos ingredientes):\\n${ingredientsStore.ingredients.map((item) => `- ${item}`).join(\"\\n\")}` : \"\"}\n\n        INSTRUCCIONES:\n        1. Analiza todos los ingredientes y crea una lista de compras optimizada\n        2. Combina ingredientes similares (ej: si aparece \"tomate - 2 unidades\" y \"tomate - 1 unidad\", combinar como \"tomate - 3 unidades\")\n        3. ${options.excludeInventory ? \"Excluye los ingredientes que ya tengo disponibles\" : \"Incluye todos los ingredientes\"}\n        4. ${options.includeBasics ? \"Incluye ingredientes básicos comunes (sal, pimienta, aceite) si no están listados\" : \"No agregues ingredientes básicos adicionales\"}\n        5. ${options.groupByCategory ? \"Agrupa los ingredientes por categorías de supermercado\" : \"Lista todos los ingredientes juntos\"}\n        6. Optimiza las cantidades para evitar desperdicios\n        7. Sugiere alternativas o marcas cuando sea apropiado\n\n        IMPORTANTE: Responde ÚNICAMENTE con un JSON válido, sin texto adicional. Usa esta estructura:\n        ${\n          options.groupByCategory\n            ? `{\n          \"resumen\": {\n              \"totalItems\": 0,\n              \"categorias\": 0,\n              \"recetasIncluidas\": ${selectedRecipes.length}\n          },\n          \"categorias\": {\n              \"carnes_pescados\": {\n                  \"nombre\": \"Carnes y Pescados\",\n                  \"icono\": \"fas fa-drumstick-bite\",\n                  \"items\": [\"item - cantidad\"]\n              },\n              \"vegetales_frutas\": {\n                  \"nombre\": \"Vegetales y Frutas\",\n                  \"icono\": \"fas fa-apple-alt\",\n                  \"items\": [\"item - cantidad\"]\n              },\n              \"lacteos_huevos\": {\n                  \"nombre\": \"Lácteos y Huevos\",\n                  \"icono\": \"fas fa-cheese\",\n                  \"items\": [\"item - cantidad\"]\n              },\n              \"cereales_granos\": {\n                  \"nombre\": \"Cereales y Granos\",\n                  \"icono\": \"fas fa-seedling\",\n                  \"items\": [\"item - cantidad\"]\n              },\n              \"condimentos_especias\": {\n                  \"nombre\": \"Condimentos y Especias\",\n                  \"icono\": \"fas fa-pepper-hot\",\n                  \"items\": [\"item - cantidad\"]\n              },\n              \"otros\": {\n                  \"nombre\": \"Otros\",\n                  \"icono\": \"fas fa-shopping-basket\",\n                  \"items\": [\"item - cantidad\"]\n              }\n          }\n      }`\n            : `{\n          \"resumen\": {\n              \"totalItems\": 0,\n              \"recetasIncluidas\": ${selectedRecipes.length}\n          },\n          \"items\": [\"item - cantidad\", \"item - cantidad\"]\n      }`\n        }\n      `;\n\n      const response = await apiStore.callGeminiAPI(prompt);\n\n      // Clean response\n      let cleanResponse = response.trim();\n      if (cleanResponse.startsWith(\"```json\")) {\n        cleanResponse = cleanResponse\n          .replace(/```json\\n?/, \"\")\n          .replace(/\\n?```$/, \"\");\n      }\n      if (cleanResponse.startsWith(\"```\")) {\n        cleanResponse = cleanResponse\n          .replace(/```\\n?/, \"\")\n          .replace(/\\n?```$/, \"\");\n      }\n\n      const shoppingList = JSON.parse(cleanResponse);\n      return shoppingList;\n    } catch (error) {\n      console.error(\"Error al generar la lista de compras:\", error);\n      throw error;\n    } finally {\n      appStore.setLoading(false);\n    }\n  };\n\n  return {\n    generateShoppingList,\n  };\n}\n","<template>\n  <div class=\"shopping-list\">\n    <header class=\"section-header\">\n      <h2><i class=\"fas fa-shopping-cart\"></i> Lista de Compras Inteligente</h2>\n      <p>\n        Genera automáticamente tu lista de compras basada en las recetas y tus\n        ingredientes actuales\n      </p>\n    </header>\n\n    <div class=\"shopping-controls\">\n      <SavedRecipesList />\n\n      <ShoppingOptions\n        v-model:include-basics=\"shoppingOptions.includeBasics\"\n        v-model:group-by-category=\"shoppingOptions.groupByCategory\"\n        v-model:exclude-inventory=\"shoppingOptions.excludeInventory\"\n      />\n\n      <button\n        class=\"generate-btn\"\n        aria-label=\"Generar lista de compras\"\n        @click=\"handleGenerateShoppingList\"\n        :disabled=\"appStore.isLoading\"\n        ref=\"generateBtn\"\n      >\n        <i class=\"fas fa-list-alt\"></i>\n        {{ appStore.isLoading ? \"Generando...\" : \"Generar Lista de Compras\" }}\n      </button>\n      <div\n        v-if=\"errorMessage\"\n        class=\"error-message\"\n        aria-live=\"assertive\"\n        tabindex=\"-1\"\n        ref=\"errorRef\"\n      >\n        {{ errorMessage }}\n      </div>\n    </div>\n\n    <ShoppingListResult\n      v-if=\"shoppingListData\"\n      :shopping-list=\"shoppingListData\"\n      :group-by-category=\"shoppingOptions.groupByCategory\"\n      @clear=\"clearShoppingList\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, nextTick } from \"vue\";\nimport SavedRecipesList from \"@/components/features/SavedRecipesList.vue\";\nimport ShoppingOptions from \"@/components/ui/ShoppingOptions.vue\";\nimport ShoppingListResult from \"@/components/features/ShoppingListResult.vue\";\nimport { useShoppingListGenerator } from \"@/composables/useShoppingListGenerator\";\nimport { useRecipesStore } from \"@/stores/recipes\";\nimport { useAppStore } from \"@/stores/app\";\n\nconst recipesStore = useRecipesStore();\nconst appStore = useAppStore();\nconst shoppingListGenerator = useShoppingListGenerator();\n\nconst shoppingOptions = ref({\n  includeBasics: true,\n  groupByCategory: true,\n  excludeInventory: true,\n});\n\nconst shoppingListData = ref(null);\n\nconst canGenerateList = computed(\n  () => recipesStore.selectedRecipesForShopping.length > 0\n);\n\nconst errorMessage = ref(\"\");\nconst errorRef = ref(null);\nconst generateBtn = ref(null);\n\nconst handleGenerateShoppingList = async () => {\n  if (appStore.isLoading) return;\n  if (recipesStore.selectedRecipesForShopping.length === 0) {\n    errorMessage.value =\n      \"Selecciona al menos una receta antes de generar la lista de compras.\";\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n    return;\n  }\n  errorMessage.value = \"\";\n  try {\n    const result = await shoppingListGenerator.generateShoppingList(\n      shoppingOptions.value\n    );\n    shoppingListData.value = result;\n  } catch (error) {\n    errorMessage.value = error.message;\n    nextTick(() => {\n      if (errorRef.value) errorRef.value.focus();\n    });\n  }\n};\n\nconst clearShoppingList = () => {\n  if (confirm(\"¿Estás seguro de que quieres limpiar la lista de compras?\")) {\n    shoppingListData.value = null;\n    recipesStore.selectedRecipesForShopping.length = 0;\n  }\n};\n</script>\n\n<style scoped>\n.shopping-list {\n  display: flex;\n  flex-direction: column;\n  gap: 25px;\n}\n\n.section-header h2 {\n  color: #333;\n  margin-bottom: 10px;\n  font-size: 1.8rem;\n}\n\n.section-header p {\n  color: #666;\n  margin-bottom: 0;\n  font-size: 1.1rem;\n}\n\n.shopping-controls {\n  background: #f8f9fa;\n  padding: 25px;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  gap: 25px;\n}\n\n.generate-btn {\n  width: 100%;\n  padding: 15px 30px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 1.1rem;\n  cursor: pointer;\n  transition: transform 0.3s ease;\n}\n\n.generate-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n}\n\n.error-message {\n  color: #dc3545;\n  background: #fff3f3;\n  border: 1px solid #dc3545;\n  border-radius: 6px;\n  padding: 8px 12px;\n  margin-top: 8px;\n  font-size: 1rem;\n  outline: none;\n}\n\n.generate-btn i {\n  margin-right: 10px;\n}\n</style>\n","<template>\n  <main class=\"main-app\">\n    <AppTabs />\n    \n    <section \n      v-show=\"appStore.currentTab === 'recipe-creator'\" \n      class=\"tab-content\"\n      role=\"tabpanel\"\n      aria-labelledby=\"recipe-creator-tab\"\n    >\n      <RecipeCreator />\n    </section>\n\n    <section \n      v-show=\"appStore.currentTab === 'shopping-list'\" \n      class=\"tab-content\"\n      role=\"tabpanel\"\n      aria-labelledby=\"shopping-list-tab\"\n    >\n      <ShoppingList />\n    </section>\n  </main>\n</template>\n\n<script setup>\nimport AppTabs from '@/components/navigation/AppTabs.vue'\nimport RecipeCreator from '@/components/features/RecipeCreator.vue'\nimport ShoppingList from '@/components/features/ShoppingList.vue'\nimport { useAppStore } from '@/stores/app'\n\nconst appStore = useAppStore()\n</script>\n\n<style scoped>\n.main-app {\n  background: white;\n  border-radius: 15px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n}\n\n.tab-content {\n  padding: 30px;\n}\n\n@media (max-width: 768px) {\n  .tab-content {\n    padding: 20px;\n  }\n}\n</style>\n"],"names":["appStore","useAppStore","apiStore","useApiStore","showSettings","newKey","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_normalizeClass","_unref","_cache","$event","_hoisted_5","useIngredientsStore","defineStore","getItem","setItem","useLocalStorage","ingredients","ref","ingredient","normalizedIngredient","index","categories","categorized","categorized_flag","category","items","ingredientsStore","newIngredient","errorMessage","errorRef","addBtn","handleAddIngredient","nextTick","clearErrorMessage","clearErrorRef","clearBtn","handleClearAll","_hoisted_4","_Fragment","_hoisted_6","_toDisplayString","emit","__emit","mealTypes","selectMeal","mealType","_renderList","meal","__props","props","mealIcons","mealLabels","mealIcon","computed","mealTypeLabel","_createTextVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","instruction","_hoisted_12","_hoisted_13","useRecipesStore","savedRecipes","selectedRecipesForShopping","recipe","type","recipeData","recipeId","id","useRecipeGenerator","selectedMealType","selectedCookingMethod","generatedRecipe","allIngredients","mealTypeGuidelines","cookingMethodGuidelines","prompt","cleanResponse","error","recipeGenerator","generateBtn","handleGenerateRecipe","recipesStore","handleSaveRecipe","receta","_createVNode","IngredientsList","MealTypeSelector","_createBlock","RecipeCard","isSelected","formatDate","dateString","handleDeleteRecipe","r","showModal","selectedRecipe","modalContent","closeBtn","handleViewRecipe","closeModal","copyIngredients","ing","copyInstructions","instructions","handleKeyDown","e","onMounted","watch","val","_Transition","$emit","checkedItems","toggleItem","itemId","markAllCompleted","getAllItemIds","key","categoria","_","exportShoppingList","exportText","item","blob","url","a","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_21","_hoisted_22","useShoppingListGenerator","options","selectedRecipes","shoppingListGenerator","shoppingOptions","shoppingListData","handleGenerateShoppingList","result","clearShoppingList","SavedRecipesList","ShoppingOptions","ShoppingListResult","AppTabs","_withDirectives","RecipeCreator","_vShow","ShoppingList"],"mappings":"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"}