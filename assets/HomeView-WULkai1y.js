import{_ as $,u as R,a as B,c as m,b as e,d as v,n as C,e as h,o as p,f as z,r as I,g as N,w,v as P,h as G,i as _,F as S,j as k,t as b,k as x,l as L,m as q,p as O}from"./index-C3czAkxX.js";const M={class:"tabs",role:"tablist"},U={class:"tabs-list"},V={class:"tab"},F=["aria-selected"],K={class:"tab"},J=["aria-selected"],W={__name:"AppTabs",setup(l){const a=R(),t=B(),c=()=>{const g=prompt("Ingresa nueva API Key de Gemini:",t.apiKey);g&&g.trim()&&(t.setApiKey(g.trim()),alert("API Key actualizada correctamente"))};return(g,u)=>(p(),m("nav",M,[e("ul",U,[e("li",V,[e("button",{id:"recipe-creator-tab",class:C(["tab-button",{active:v(a).currentTab==="recipe-creator"}]),role:"tab","aria-selected":v(a).currentTab==="recipe-creator","aria-controls":"recipe-creator",onClick:u[0]||(u[0]=o=>v(a).switchTab("recipe-creator"))},u[2]||(u[2]=[e("i",{class:"fas fa-magic"},null,-1),h(" Creador de Recetas ",-1)]),10,F)]),e("li",K,[e("button",{id:"shopping-list-tab",class:C(["tab-button",{active:v(a).currentTab==="shopping-list"}]),role:"tab","aria-selected":v(a).currentTab==="shopping-list","aria-controls":"shopping-list",onClick:u[1]||(u[1]=o=>v(a).switchTab("shopping-list"))},u[3]||(u[3]=[e("i",{class:"fas fa-shopping-cart"},null,-1),h(" Lista de Compras ",-1)]),10,J)]),e("li",{class:"tab"},[e("button",{class:"tab-button",role:"button","aria-label":"Configuración de la aplicación",onClick:c},u[4]||(u[4]=[e("i",{class:"fas fa-cog"},null,-1),h(" Configuración ",-1)]))])])]))}},H=$(W,[["__scopeId","data-v-1e74daa8"]]),A=z("ingredients",()=>{const{getItem:l,setItem:a}=N(),t=I(l("inventory_items",[]));return{ingredients:t,addIngredient:s=>{const n=s.toLowerCase().trim();n&&!t.value.includes(n)&&(t.value.push(n),a("inventory_items",t.value))},removeIngredient:s=>{t.value.splice(s,1),a("inventory_items",t.value)},clearAllIngredients:()=>{t.value=[],a("inventory_items",t.value)},categorizeIngredients:()=>{const s={meats:["pollo","carne","pescado","cerdo","ternera","atun","salmón"],vegetables:["verduras","brócoli","zanahoria","espinaca","tomate","cebolla","pimiento","lechuga","calabacín"],carbs:["arroz","pasta","pan","patata","patatas","quinoa","batata","harina","tortillas"],dairy:["leche","queso","yogurt","manteca","crema"],eggs:["huevos","huevo"],fruits:["manzana","plátano","naranja","frutas","fresa","uvas","kiwi","arándanos"],cereals:["avena","cereales","granola"],legumes:["lentejas","garbanzos","frijoles","judías"],fats:["aceite","aguacate","nueces","almendras","aceitunas"]},n={meats:[],vegetables:[],carbs:[],dairy:[],eggs:[],fruits:[],cereals:[],legumes:[],fats:[],others:[]};return t.value.forEach(r=>{let i=!1;for(const[f,d]of Object.entries(s))if(d.includes(r.toLowerCase())){n[f].push(r),i=!0;break}i||n.others.push(r)}),n}}}),X={class:"inventory-section"},Q={class:"section-header"},Y=["disabled"],Z={class:"input-group"},ee=["disabled"],se={class:"inventory-list",role:"list"},te={key:0,class:"empty-state"},ae={class:"ingredient-name"},ne=["aria-label","onClick"],ie={__name:"IngredientsList",setup(l){const a=A(),t=I(""),c=()=>{t.value.trim()&&(a.addIngredient(t.value.trim()),t.value="")},g=()=>{confirm("¿Estás seguro de que quieres eliminar todos los ingredientes?")&&a.clearAllIngredients()};return(u,o)=>(p(),m("section",X,[e("header",Q,[o[2]||(o[2]=e("h3",null,"Mis Ingredientes:",-1)),e("button",{class:"clear-btn",disabled:v(a).ingredients.length===0,title:"Limpiar todos los ingredientes","aria-label":"Limpiar todos los ingredientes",onClick:g},o[1]||(o[1]=[e("i",{class:"fas fa-trash-alt"},null,-1),h(" Limpiar Todo ",-1)]),8,Y)]),e("form",{class:"input-form",onSubmit:G(c,["prevent"])},[e("div",Z,[o[4]||(o[4]=e("label",{for:"inventoryItem",class:"sr-only"}," Agregar ingrediente ",-1)),w(e("input",{id:"inventoryItem","onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),type:"text",placeholder:"Ej: tomates, cebolla, pollo, arroz...","aria-label":"Ingresa un ingrediente"},null,512),[[P,t.value]]),e("button",{type:"submit",disabled:!t.value.trim(),"aria-label":"Agregar ingrediente"},o[3]||(o[3]=[e("i",{class:"fas fa-plus"},null,-1),h(" Agregar ",-1)]),8,ee)])],32),e("ul",se,[v(a).ingredients.length===0?(p(),m("li",te,o[5]||(o[5]=[e("p",null," No hay ingredientes agregados. Agrega algunos ingredientes que tienes disponibles. ",-1)]))):_("",!0),(p(!0),m(S,null,k(v(a).ingredients,(s,n)=>(p(),m("li",{key:`${s}-${n}`,class:"inventory-item",role:"listitem"},[e("span",ae,b(s),1),e("button",{class:"remove-item","aria-label":`Eliminar ${s}`,title:"Eliminar ingrediente",onClick:r=>v(a).removeIngredient(n)},o[6]||(o[6]=[e("i",{class:"fas fa-times"},null,-1)]),8,ne)]))),128))])]))}},oe=$(ie,[["__scopeId","data-v-e63b56b4"]]),re={class:"meal-type-section"},le={class:"meal-buttons",role:"group","aria-label":"Tipo de comida"},ce=["data-meal","aria-checked","onClick"],de={__name:"MealTypeSelector",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(l,{emit:a}){const t=a,c=[{value:"desayuno",label:"Desayuno",icon:"fas fa-sun"},{value:"almuerzo",label:"Almuerzo",icon:"fas fa-utensils"},{value:"merienda",label:"Merienda",icon:"fas fa-cookie"},{value:"cena",label:"Cena",icon:"fas fa-moon"}],g=u=>{t("update:modelValue",u)};return(u,o)=>(p(),m("section",re,[o[0]||(o[0]=e("h3",null,"Tipo de comida:",-1)),e("div",le,[(p(),m(S,null,k(c,s=>e("button",{key:s.value,class:C(["meal-btn",{selected:l.modelValue===s.value}]),"data-meal":s.value,role:"radio","aria-checked":l.modelValue===s.value,onClick:n=>g(s.value)},[e("i",{class:C(s.icon)},null,2),h(" "+b(s.label),1)],10,ce)),64))])]))}},ue=$(de,[["__scopeId","data-v-f2090326"]]),pe={class:"recipe-card"},ge={class:"recipe-header"},me={class:"recipe-info"},he={class:"info-item"},ve={class:"info-item"},be={class:"info-item"},fe={class:"ingredients-section"},ye={class:"ingredients-list"},$e={class:"instructions-section"},_e={class:"instructions-list"},Ce={key:0,class:"tips-section"},Ie={class:"tips-content"},Se={__name:"RecipeCard",props:{recipe:{type:Object,required:!0},mealType:{type:String,required:!0}},setup(l){const a=l,t={desayuno:"fas fa-sun",almuerzo:"fas fa-utensils",merienda:"fas fa-cookie",cena:"fas fa-moon"},c={desayuno:"Desayuno",almuerzo:"Almuerzo",merienda:"Merienda",cena:"Cena"},g=x(()=>t[a.mealType]||"fas fa-utensils"),u=x(()=>c[a.mealType]||a.mealType);return(o,s)=>(p(),m("article",pe,[e("header",ge,[e("h3",null,[e("i",{class:C(g.value)},null,2),h(" "+b(l.recipe.nombre),1)]),e("p",null,[s[0]||(s[0]=e("strong",null,"Tipo:",-1)),h(" "+b(u.value),1)])]),e("div",me,[e("div",he,[s[1]||(s[1]=e("i",{class:"fas fa-clock"},null,-1)),s[2]||(s[2]=e("strong",null,"Tiempo",-1)),e("span",null,b(l.recipe.tiempo),1)]),e("div",ve,[s[3]||(s[3]=e("i",{class:"fas fa-users"},null,-1)),s[4]||(s[4]=e("strong",null,"Porciones",-1)),e("span",null,b(l.recipe.porciones),1)]),e("div",be,[s[5]||(s[5]=e("i",{class:"fas fa-chart-line"},null,-1)),s[6]||(s[6]=e("strong",null,"Complejidad",-1)),e("span",null,b(l.recipe.complejidad),1)])]),e("section",fe,[s[7]||(s[7]=e("h4",null,[e("i",{class:"fas fa-list"}),h(" Ingredientes:")],-1)),e("div",ye,[e("ul",null,[(p(!0),m(S,null,k(l.recipe.ingredientes,n=>(p(),m("li",{key:n},b(n),1))),128))])])]),e("section",$e,[s[8]||(s[8]=e("h4",null,[e("i",{class:"fas fa-tasks"}),h(" Instrucciones:")],-1)),e("div",_e,[e("ol",null,[(p(!0),m(S,null,k(l.recipe.instrucciones,n=>(p(),m("li",{key:n},b(n),1))),128))])])]),l.recipe.consejos?(p(),m("section",Ce,[s[9]||(s[9]=e("h4",null,[e("i",{class:"fas fa-lightbulb"}),h(" Consejos:")],-1)),e("div",Ie,[e("p",null,b(l.recipe.consejos),1)])])):_("",!0)]))}},ke=$(Se,[["__scopeId","data-v-92852eaf"]]),j=z("recipes",()=>{const{getItem:l,setItem:a}=N(),t=I(l("saved_recipes",[])),c=I([]);return{savedRecipes:t,selectedRecipesForShopping:c,saveRecipe:(n,r="individual")=>{const i={id:Date.now(),type:r,data:n,createdAt:new Date().toISOString()};t.value.push(i),a("saved_recipes",t.value)},deleteRecipe:n=>{t.value=t.value.filter(r=>r.id!==n),c.value=c.value.filter(r=>r!==n),a("saved_recipes",t.value)},clearAllRecipes:()=>{t.value=[],c.value=[],a("saved_recipes",t.value)},toggleRecipeSelection:n=>{const r=c.value.indexOf(n);r>-1?c.value.splice(r,1):c.value.push(n)}}});function Le(){const l=B(),a=R(),t=j(),c=A(),g=I(""),u=I(null);return{selectedMealType:g,generatedRecipe:u,generateRecipe:async()=>{if(c.ingredients.length===0)throw new Error("Por favor, agrega ingredientes a tu inventario para generar una receta.");if(!g.value)throw new Error("Por favor, selecciona un tipo de comida antes de generar la receta.");a.setLoading(!0);try{const s=c.categorizeIngredients(),n=c.ingredients.join(", ");let r="";switch(g.value){case"desayuno":r="Para el desayuno, genera una receta típica y adecuada para la primera comida del día. Evita explícitamente el uso de carnes pesadas (como pollo, carne de res) o pescados como ingrediente principal, y preparaciones muy elaboradas o que requieran mucho tiempo. Prioriza opciones como cereales, huevos, frutas, o lácteos.";break;case"merienda":r="Para la merienda, debe ser una opción ligera, rápida y energizante para media tarde. Evita platos principales o que requieran cocción compleja.";break;case"almuerzo":r="Para el almuerzo, genera una comida principal y sustanciosa. Debe ser una receta completa que pueda incluir proteínas, carbohidratos y vegetales.";break;case"cena":r="Para la cena, genera una comida balanceada, nutritiva y adecuada para la última comida del día. Puede ser ligeramente más ligera que el almuerzo.";break}const i=`
        Eres un chef experto y nutricionista con un profundo conocimiento de dietas balanceadas y costumbres culinarias de la región del Cono Sur (Argentina, Uruguay, Chile, Paraguay y Brasil). Tu objetivo es combinar la tradición culinaria local con principios nutricionales modernos para crear recetas y consejos que sean saludables, deliciosos y culturalmente apropiados.
        Necesito que generes una única receta para la comida de ${g.value}.

        Los ingredientes que tengo disponibles en mi inventario son: ${n}.
        ${r}

        Para la receta, proporciona:
        - **Nombre del plato**
        - **Lista completa de ingredientes** con cantidades aproximadas (puedes agregar ingredientes básicos como sal, pimienta, aceite, especias, si son necesarios y no están explícitamente en la lista original).
        - **Instrucciones** paso a paso, claras y concisas.
        - **Tiempo** de preparación (ej. "20 minutos").
        - **Porciones** (ej. "1 persona", "2 personas", "6 personas", etc).
        - **Nivel de complejidad** (Fácil/Intermedio/Difícil).
        - **Consejos** adicionales (opcional, uno o varios si aplica).

        Asegúrate de que la receta sea coherente, balanceada, nutritiva y que use los ingredientes de mi inventario de manera inteligente, no es necesario usar todos los ingredientes.
        Si un ingrediente es esencial para el tipo de comida y no está en el inventario, puedes incluirlo pero prioriza el uso de lo que tengo.

        IMPORTANTE: Responde ÚNICAMENTE con un JSON válido, sin texto adicional antes o después. No incluyas explicaciones o texto introductorio/final. Usa esta estructura exacta:
        {
            "nombre": "Nombre del plato",
            "ingredientes": ["ingrediente 1 - cantidad", "ingrediente 2 - cantidad"],
            "instrucciones": ["paso 1", "paso 2"],
            "tiempo": "X minutos",
            "porciones": "X personas",
            "complejidad": "Fácil",
            "consejos": "Consejos adicionales (opcional)"
        }
      `;let d=(await l.callGeminiAPI(i)).trim();d.startsWith("```json")&&(d=d.replace(/```json\n?/,"").replace(/\n?```$/,"")),d.startsWith("```")&&(d=d.replace(/```\n?/,"").replace(/\n?```$/,""));const y=JSON.parse(d);return y.id=Date.now().toString(),y.mealType=g.value,u.value=y,t.saveRecipe(y),y}catch(s){throw console.error("Error al generar la receta:",s),s}finally{a.setLoading(!1)}}}}const Re={class:"recipe-creator"},Ee=["disabled"],Te={__name:"RecipeCreator",setup(l){const a=Le(),t=A(),c=R(),g=x(()=>t.ingredients.length>0&&a.selectedMealType.value),u=async()=>{try{await a.generateRecipe()}catch(o){alert(o.message)}};return(o,s)=>(p(),m("div",Re,[s[2]||(s[2]=e("header",{class:"section-header"},[e("h2",null,[e("i",{class:"fas fa-magic"}),h(" Creador de Recetas Inteligente")]),e("p",null,"Administra tus ingredientes y genera recetas personalizadas con IA")],-1)),L(oe),L(ue,{modelValue:v(a).selectedMealType.value,"onUpdate:modelValue":s[0]||(s[0]=n=>v(a).selectedMealType.value=n),class:"meal-type-section"},null,8,["modelValue"]),e("button",{class:"generate-btn",disabled:!g.value||v(c).isLoading,"aria-label":"Generar receta",onClick:u},[s[1]||(s[1]=e("i",{class:"fas fa-magic"},null,-1)),h(" "+b(v(c).isLoading?"Generando...":"Generar Receta"),1)],8,Ee),v(a).generatedRecipe.value?(p(),q(ke,{key:0,recipe:v(a).generatedRecipe.value,"meal-type":v(a).selectedMealType.value,class:"recipe-result"},null,8,["recipe","meal-type"])):_("",!0)]))}},xe=$(Te,[["__scopeId","data-v-4463a1ac"]]),Ae={class:"recipe-selection"},je={class:"section-header"},we=["disabled"],Be={class:"saved-recipes-list"},Oe={key:0,class:"no-recipes"},ze=["data-recipe-id"],Ne={class:"recipe-info-compact"},qe={class:"recipe-name"},De={class:"recipe-meta"},Pe={class:"recipe-actions"},Ge=["aria-label","onClick"],Me=["aria-label","onClick"],Ue={__name:"SavedRecipesList",setup(l){const a=j(),t=o=>a.selectedRecipesForShopping.includes(o),c=o=>new Date(o).toLocaleDateString("es-ES"),g=o=>{const s=a.savedRecipes.find(n=>n.id===o);confirm(`¿Estás seguro de que quieres eliminar la receta "${s?.data.nombre}"?`)&&a.deleteRecipe(o)},u=()=>{confirm("¿Estás seguro de que quieres eliminar todas las recetas guardadas?")&&a.clearAllRecipes()};return(o,s)=>(p(),m("section",Ae,[e("header",je,[s[1]||(s[1]=e("h3",null,"Recetas Guardadas:",-1)),e("button",{class:"clear-btn",disabled:v(a).savedRecipes.length===0,title:"Eliminar todas las recetas guardadas","aria-label":"Eliminar todas las recetas guardadas",onClick:u},s[0]||(s[0]=[e("i",{class:"fas fa-trash-alt"},null,-1),h(" Eliminar Todas ",-1)]),8,we)]),e("ul",Be,[v(a).savedRecipes.length===0?(p(),m("li",Oe,s[2]||(s[2]=[e("p",null,"No hay recetas guardadas. Genera algunas recetas primero.",-1)]))):_("",!0),(p(!0),m(S,null,k(v(a).savedRecipes,n=>(p(),m("li",{key:n.id,class:C(["recipe-item",{selected:t(n.id)}]),"data-recipe-id":n.id},[e("div",Ne,[e("div",qe,b(n.data.nombre),1),e("div",De,[s[3]||(s[3]=e("i",{class:"fas fa-calendar"},null,-1)),h(" "+b(c(n.createdAt))+" • "+b(n.data.tiempo)+" • "+b(n.data.porciones),1)])]),e("div",Pe,[e("button",{class:"recipe-select-btn","aria-label":t(n.id)?"Deseleccionar receta":"Seleccionar receta",onClick:r=>v(a).toggleRecipeSelection(n.id)},b(t(n.id)?"Deseleccionar":"Seleccionar"),9,Ge),e("button",{class:"recipe-delete-btn",title:"Eliminar receta","aria-label":`Eliminar receta ${n.data.nombre}`,onClick:r=>g(n.id)},s[4]||(s[4]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Me)])],10,ze))),128))])]))}},Ve=$(Ue,[["__scopeId","data-v-d7697bab"]]),Fe={class:"shopping-options"},Ke={role:"group","aria-labelledby":"shopping-options-heading"},Je={class:"option-group"},We={class:"checkbox-label"},He=["checked"],Xe={class:"option-group"},Qe={class:"checkbox-label"},Ye=["checked"],Ze={class:"option-group"},es={class:"checkbox-label"},ss=["checked"],ts={__name:"ShoppingOptions",props:{includeBasics:{type:Boolean,default:!0},groupByCategory:{type:Boolean,default:!0},excludeInventory:{type:Boolean,default:!0}},emits:["update:includeBasics","update:groupByCategory","update:excludeInventory"],setup(l){return(a,t)=>(p(),m("section",Fe,[t[9]||(t[9]=e("h3",null,"Opciones de Lista:",-1)),e("div",Ke,[e("div",Je,[e("label",We,[e("input",{type:"checkbox",checked:l.includeBasics,onChange:t[0]||(t[0]=c=>a.$emit("update:includeBasics",c.target.checked))},null,40,He),t[3]||(t[3]=e("span",{class:"checkmark"},null,-1)),t[4]||(t[4]=h(" Incluir ingredientes básicos (sal, aceite, especias) ",-1))])]),e("div",Xe,[e("label",Qe,[e("input",{type:"checkbox",checked:l.groupByCategory,onChange:t[1]||(t[1]=c=>a.$emit("update:groupByCategory",c.target.checked))},null,40,Ye),t[5]||(t[5]=e("span",{class:"checkmark"},null,-1)),t[6]||(t[6]=h(" Agrupar por categorías (carnes, vegetales, etc.) ",-1))])]),e("div",Ze,[e("label",es,[e("input",{type:"checkbox",checked:l.excludeInventory,onChange:t[2]||(t[2]=c=>a.$emit("update:excludeInventory",c.target.checked))},null,40,ss),t[7]||(t[7]=e("span",{class:"checkmark"},null,-1)),t[8]||(t[8]=h(" Excluir ingredientes que ya tengo ",-1))])])])]))}},as=$(ts,[["__scopeId","data-v-8343a330"]]),ns={class:"shopping-list-result"},is={class:"shopping-summary"},os={class:"summary-stats"},rs={class:"stat-item"},ls={class:"stat-number"},cs={key:0,class:"stat-item"},ds={class:"stat-number"},us={class:"stat-item"},ps={class:"stat-number"},gs={class:"shopping-list-card"},ms={key:0},hs={key:0},vs={key:1,class:"shopping-items"},bs=["data-item"],fs=["checked","onChange"],ys={class:"shopping-item-text"},$s={key:1,class:"shopping-category"},_s={class:"shopping-items"},Cs=["data-item"],Is=["checked","onChange"],Ss={class:"shopping-item-text"},ks={class:"shopping-actions"},Ls={__name:"ShoppingListResult",props:{shoppingList:{type:Object,required:!0},groupByCategory:{type:Boolean,default:!0}},emits:["clear"],setup(l){const a=l,t=I(new Set),c=s=>{t.value.has(s)?t.value.delete(s):t.value.add(s)},g=()=>{u().forEach(n=>t.value.add(n))},u=()=>{const s=[];return a.groupByCategory&&a.shoppingList.categorias?Object.entries(a.shoppingList.categorias).forEach(([n,r])=>{r.items&&r.items.forEach((i,f)=>{s.push(`${n}-${f}`)})}):a.shoppingList.items&&a.shoppingList.items.forEach((n,r)=>{s.push(`item-${r}`)}),s},o=()=>{let s=`=== LISTA DE COMPRAS ===

`;s+=`Generada el: ${new Date().toLocaleDateString()}
`,s+=`Total de productos: ${a.shoppingList.resumen.totalItems}
`,s+=`Productos completados: ${t.value.size}

`,s+=`PRODUCTOS PENDIENTES:
`,a.groupByCategory&&a.shoppingList.categorias?Object.entries(a.shoppingList.categorias).forEach(([f,d])=>{d.items&&d.items.length>0&&(s+=`
${d.nombre.toUpperCase()}:
`,d.items.forEach((y,T)=>{const E=`${f}-${T}`;t.value.has(E)||(s+=`☐ ${y}
`)}))}):a.shoppingList.items&&a.shoppingList.items.forEach((f,d)=>{const y=`item-${d}`;t.value.has(y)||(s+=`☐ ${f}
`)}),t.value.size>0&&(s+=`
PRODUCTOS COMPLETADOS:
`,a.groupByCategory&&a.shoppingList.categorias?Object.entries(a.shoppingList.categorias).forEach(([f,d])=>{d.items&&d.items.length>0&&d.items.filter((T,E)=>t.value.has(`${f}-${E}`)).length>0&&(s+=`
${d.nombre.toUpperCase()}:
`,d.items.forEach((T,E)=>{const D=`${f}-${E}`;t.value.has(D)&&(s+=`☑ ${T}
`)}))}):a.shoppingList.items&&a.shoppingList.items.forEach((f,d)=>{const y=`item-${d}`;t.value.has(y)&&(s+=`☑ ${f}
`)}));const n=new Blob([s],{type:"text/plain"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`lista-compras-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),alert("Lista de compras exportada exitosamente")};return(s,n)=>(p(),m("div",ns,[e("div",is,[n[4]||(n[4]=e("h3",null,[e("i",{class:"fas fa-chart-pie"}),h(" Resumen de tu Lista de Compras")],-1)),e("div",os,[e("div",rs,[e("span",ls,b(l.shoppingList.resumen.totalItems),1),n[1]||(n[1]=e("div",{class:"stat-label"},"Productos totales",-1))]),l.groupByCategory?(p(),m("div",cs,[e("span",ds,b(l.shoppingList.resumen.categorias),1),n[2]||(n[2]=e("div",{class:"stat-label"},"Categorías",-1))])):_("",!0),e("div",us,[e("span",ps,b(l.shoppingList.resumen.recetasIncluidas),1),n[3]||(n[3]=e("div",{class:"stat-label"},"Recetas incluidas",-1))])])]),e("div",gs,[e("h3",null,[n[5]||(n[5]=e("i",{class:"fas fa-list-alt"},null,-1)),h(" Lista de Compras"+b(l.groupByCategory?" por Categorías":""),1)]),l.groupByCategory&&l.shoppingList.categorias?(p(),m("div",ms,[(p(!0),m(S,null,k(Object.entries(l.shoppingList.categorias),([r,i])=>(p(),m("div",{key:r,class:"shopping-category"},[i.items&&i.items.length>0?(p(),m("h4",hs,[e("i",{class:C(i.icono)},null,2),h(" "+b(i.nombre),1)])):_("",!0),i.items&&i.items.length>0?(p(),m("div",vs,[(p(!0),m(S,null,k(i.items,(f,d)=>(p(),m("div",{key:`${r}-${d}`,class:C(["shopping-item",{checked:t.value.has(`${r}-${d}`)}]),"data-item":`${r}-${d}`},[e("input",{type:"checkbox",class:"shopping-checkbox",checked:t.value.has(`${r}-${d}`),onChange:y=>c(`${r}-${d}`)},null,40,fs),e("span",ys,b(f),1)],10,bs))),128))])):_("",!0)]))),128))])):l.shoppingList.items?(p(),m("div",$s,[e("div",_s,[(p(!0),m(S,null,k(l.shoppingList.items,(r,i)=>(p(),m("div",{key:`item-${i}`,class:C(["shopping-item",{checked:t.value.has(`item-${i}`)}]),"data-item":`item-${i}`},[e("input",{type:"checkbox",class:"shopping-checkbox",checked:t.value.has(`item-${i}`),onChange:f=>c(`item-${i}`)},null,40,Is),e("span",Ss,b(r),1)],10,Cs))),128))])])):_("",!0),e("div",ks,[e("button",{class:"action-btn primary",onClick:o},n[6]||(n[6]=[e("i",{class:"fas fa-download"},null,-1),h(" Descargar Lista ",-1)])),e("button",{class:"action-btn secondary",onClick:n[0]||(n[0]=r=>s.$emit("clear"))},n[7]||(n[7]=[e("i",{class:"fas fa-trash"},null,-1),h(" Limpiar Lista ",-1)])),e("button",{class:"action-btn success",onClick:g},n[8]||(n[8]=[e("i",{class:"fas fa-check-double"},null,-1),h(" Marcar Todo ",-1)]))])])]))}},Rs=$(Ls,[["__scopeId","data-v-3804f03e"]]);function Es(){const l=B(),a=R(),t=j(),c=A();return{generateShoppingList:async u=>{if(t.selectedRecipesForShopping.length===0)throw new Error("Por favor selecciona al menos una receta para generar la lista de compras");a.setLoading(!0);try{const o=t.savedRecipes.filter(d=>t.selectedRecipesForShopping.includes(d.id));let s=[];o.forEach(d=>{d.data.ingredientes&&(s=s.concat(d.data.ingredientes))});const n=`
        Eres un asistente experto en compras de supermercado. Necesito que generes una lista de compras inteligente basada en los siguientes ingredientes de recetas:

        INGREDIENTES DE LAS RECETAS:
        ${s.map((d,y)=>`${y+1}. ${d}`).join(`
`)}

        ${u.excludeInventory?`
MIS INGREDIENTES ACTUALES (excluir estos ingredientes):
${c.ingredients.map(d=>`- ${d}`).join(`
`)}`:""}

        INSTRUCCIONES:
        1. Analiza todos los ingredientes y crea una lista de compras optimizada
        2. Combina ingredientes similares (ej: si aparece "tomate - 2 unidades" y "tomate - 1 unidad", combinar como "tomate - 3 unidades")
        3. ${u.excludeInventory?"Excluye los ingredientes que ya tengo disponibles":"Incluye todos los ingredientes"}
        4. ${u.includeBasics?"Incluye ingredientes básicos comunes (sal, pimienta, aceite) si no están listados":"No agregues ingredientes básicos adicionales"}
        5. ${u.groupByCategory?"Agrupa los ingredientes por categorías de supermercado":"Lista todos los ingredientes juntos"}
        6. Optimiza las cantidades para evitar desperdicios
        7. Sugiere alternativas o marcas cuando sea apropiado

        IMPORTANTE: Responde ÚNICAMENTE con un JSON válido, sin texto adicional. Usa esta estructura:
        ${u.groupByCategory?`{
          "resumen": {
              "totalItems": 0,
              "categorias": 0,
              "recetasIncluidas": ${o.length}
          },
          "categorias": {
              "carnes_pescados": {
                  "nombre": "Carnes y Pescados",
                  "icono": "fas fa-drumstick-bite",
                  "items": ["item - cantidad"]
              },
              "vegetales_frutas": {
                  "nombre": "Vegetales y Frutas",
                  "icono": "fas fa-apple-alt",
                  "items": ["item - cantidad"]
              },
              "lacteos_huevos": {
                  "nombre": "Lácteos y Huevos",
                  "icono": "fas fa-cheese",
                  "items": ["item - cantidad"]
              },
              "cereales_granos": {
                  "nombre": "Cereales y Granos",
                  "icono": "fas fa-seedling",
                  "items": ["item - cantidad"]
              },
              "condimentos_especias": {
                  "nombre": "Condimentos y Especias",
                  "icono": "fas fa-pepper-hot",
                  "items": ["item - cantidad"]
              },
              "otros": {
                  "nombre": "Otros",
                  "icono": "fas fa-shopping-basket",
                  "items": ["item - cantidad"]
              }
          }
      }`:`{
          "resumen": {
              "totalItems": 0,
              "recetasIncluidas": ${o.length}
          },
          "items": ["item - cantidad", "item - cantidad"]
      }`}
      `;let i=(await l.callGeminiAPI(n)).trim();return i.startsWith("```json")&&(i=i.replace(/```json\n?/,"").replace(/\n?```$/,"")),i.startsWith("```")&&(i=i.replace(/```\n?/,"").replace(/\n?```$/,"")),JSON.parse(i)}catch(o){throw console.error("Error al generar la lista de compras:",o),o}finally{a.setLoading(!1)}}}}const Ts={class:"shopping-list"},xs={class:"shopping-controls"},As=["disabled"],js={__name:"ShoppingList",setup(l){const a=j(),t=R(),c=Es(),g=I({includeBasics:!0,groupByCategory:!0,excludeInventory:!0}),u=I(null),o=x(()=>a.selectedRecipesForShopping.length>0),s=async()=>{try{const r=await c.generateShoppingList(g.value);u.value=r}catch(r){alert(r.message)}},n=()=>{confirm("¿Estás seguro de que quieres limpiar la lista de compras?")&&(u.value=null,a.selectedRecipesForShopping.length=0)};return(r,i)=>(p(),m("div",Ts,[i[4]||(i[4]=e("header",{class:"section-header"},[e("h2",null,[e("i",{class:"fas fa-shopping-cart"}),h(" Lista de Compras Inteligente")]),e("p",null," Genera automáticamente tu lista de compras basada en las recetas y tus ingredientes actuales ")],-1)),e("div",xs,[L(Ve),L(as,{"include-basics":g.value.includeBasics,"onUpdate:includeBasics":i[0]||(i[0]=f=>g.value.includeBasics=f),"group-by-category":g.value.groupByCategory,"onUpdate:groupByCategory":i[1]||(i[1]=f=>g.value.groupByCategory=f),"exclude-inventory":g.value.excludeInventory,"onUpdate:excludeInventory":i[2]||(i[2]=f=>g.value.excludeInventory=f)},null,8,["include-basics","group-by-category","exclude-inventory"]),e("button",{class:"generate-btn",disabled:!o.value||v(t).isLoading,"aria-label":"Generar lista de compras",onClick:s},[i[3]||(i[3]=e("i",{class:"fas fa-list-alt"},null,-1)),h(" "+b(v(t).isLoading?"Generando...":"Generar Lista de Compras"),1)],8,As)]),u.value?(p(),q(Rs,{key:0,"shopping-list":u.value,"group-by-category":g.value.groupByCategory,onClear:n},null,8,["shopping-list","group-by-category"])):_("",!0)]))}},ws=$(js,[["__scopeId","data-v-e0b299ff"]]),Bs={class:"main-app"},Os={class:"tab-content",role:"tabpanel","aria-labelledby":"recipe-creator-tab"},zs={class:"tab-content",role:"tabpanel","aria-labelledby":"shopping-list-tab"},Ns={__name:"HomeView",setup(l){const a=R();return(t,c)=>(p(),m("main",Bs,[L(H),w(e("section",Os,[L(xe)],512),[[O,v(a).currentTab==="recipe-creator"]]),w(e("section",zs,[L(ws)],512),[[O,v(a).currentTab==="shopping-list"]])]))}},Ds=$(Ns,[["__scopeId","data-v-7898df1b"]]);export{Ds as default};
//# sourceMappingURL=HomeView-WULkai1y.js.map
