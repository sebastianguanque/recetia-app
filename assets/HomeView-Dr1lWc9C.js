import{_ as $,u as R,a as j,c as g,b as e,d as b,n as I,e as h,o as p,f as z,r as C,g as N,w as B,v as P,h as G,i as y,F as S,j as k,t as f,k as A,l as L,m as D,p as O}from"./index-BtjSq_Pe.js";const M={class:"tabs",role:"tablist"},U={class:"tabs-list"},V={class:"tab"},F=["aria-selected"],K={class:"tab"},J=["aria-selected"],W={__name:"AppTabs",setup(l){const a=R(),t=j(),c=()=>{const m=prompt("Ingresa nueva API Key de Gemini:",t.apiKey);m&&m.trim()&&(t.setApiKey(m.trim()),alert("API Key actualizada correctamente"))};return(m,u)=>(p(),g("nav",M,[e("ul",U,[e("li",V,[e("button",{id:"recipe-creator-tab",class:I(["tab-button",{active:b(a).currentTab==="recipe-creator"}]),role:"tab","aria-selected":b(a).currentTab==="recipe-creator","aria-controls":"recipe-creator",onClick:u[0]||(u[0]=o=>b(a).switchTab("recipe-creator"))},u[2]||(u[2]=[e("i",{class:"fas fa-magic"},null,-1),h(" Creador de Recetas ",-1)]),10,F)]),e("li",K,[e("button",{id:"shopping-list-tab",class:I(["tab-button",{active:b(a).currentTab==="shopping-list"}]),role:"tab","aria-selected":b(a).currentTab==="shopping-list","aria-controls":"shopping-list",onClick:u[1]||(u[1]=o=>b(a).switchTab("shopping-list"))},u[3]||(u[3]=[e("i",{class:"fas fa-shopping-cart"},null,-1),h(" Lista de Compras ",-1)]),10,J)]),e("li",{class:"tab"},[e("button",{class:"tab-button",role:"button","aria-label":"Configuración de la aplicación",onClick:c},u[4]||(u[4]=[e("i",{class:"fas fa-cog"},null,-1),h(" Configuración ",-1)]))])])]))}},H=$(W,[["__scopeId","data-v-1e74daa8"]]),w=z("ingredients",()=>{const{getItem:l,setItem:a}=N(),t=C(l("inventory_items",[]));return{ingredients:t,addIngredient:s=>{const n=s.toLowerCase().trim();n&&!t.value.includes(n)&&(t.value.push(n),a("inventory_items",t.value))},removeIngredient:s=>{t.value.splice(s,1),a("inventory_items",t.value)},clearAllIngredients:()=>{t.value=[],a("inventory_items",t.value)},categorizeIngredients:()=>{const s={meats:["pollo","carne","pescado","cerdo","ternera","atun","salmón"],vegetables:["verduras","brócoli","zanahoria","espinaca","tomate","cebolla","pimiento","lechuga","calabacín"],carbs:["arroz","pasta","pan","patata","patatas","quinoa","batata","harina","tortillas"],dairy:["leche","queso","yogurt","manteca","crema"],eggs:["huevos","huevo"],fruits:["manzana","plátano","naranja","frutas","fresa","uvas","kiwi","arándanos"],cereals:["avena","cereales","granola"],legumes:["lentejas","garbanzos","frijoles","judías"],fats:["aceite","aguacate","nueces","almendras","aceitunas"]},n={meats:[],vegetables:[],carbs:[],dairy:[],eggs:[],fruits:[],cereals:[],legumes:[],fats:[],others:[]};return t.value.forEach(r=>{let i=!1;for(const[v,d]of Object.entries(s))if(d.includes(r.toLowerCase())){n[v].push(r),i=!0;break}i||n.others.push(r)}),n}}}),X={class:"inventory-section"},Q={class:"section-header"},Y=["disabled"],Z={class:"input-group"},ee=["disabled"],se={class:"inventory-list",role:"list"},te={key:0,class:"empty-state"},ae={class:"ingredient-name"},ne=["aria-label","onClick"],ie={__name:"IngredientsList",setup(l){const a=w(),t=C(""),c=()=>{t.value.trim()&&(a.addIngredient(t.value.trim()),t.value="")},m=()=>{confirm("¿Estás seguro de que quieres eliminar todos los ingredientes?")&&a.clearAllIngredients()};return(u,o)=>(p(),g("section",X,[e("header",Q,[o[2]||(o[2]=e("h3",null,"Mis Ingredientes:",-1)),e("button",{class:"clear-btn",disabled:b(a).ingredients.length===0,title:"Limpiar todos los ingredientes","aria-label":"Limpiar todos los ingredientes",onClick:m},o[1]||(o[1]=[e("i",{class:"fas fa-trash-alt"},null,-1),h(" Limpiar Todo ",-1)]),8,Y)]),e("form",{class:"input-form",onSubmit:G(c,["prevent"])},[e("div",Z,[o[4]||(o[4]=e("label",{for:"inventoryItem",class:"sr-only"}," Agregar ingrediente ",-1)),B(e("input",{id:"inventoryItem","onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),type:"text",placeholder:"Ej: tomates, cebolla, pollo, arroz...","aria-label":"Ingresa un ingrediente"},null,512),[[P,t.value]]),e("button",{type:"submit",disabled:!t.value.trim(),"aria-label":"Agregar ingrediente"},o[3]||(o[3]=[e("i",{class:"fas fa-plus"},null,-1),h(" Agregar ",-1)]),8,ee)])],32),e("ul",se,[b(a).ingredients.length===0?(p(),g("li",te,o[5]||(o[5]=[e("p",null," No hay ingredientes agregados. Agrega algunos ingredientes que tienes disponibles. ",-1)]))):y("",!0),(p(!0),g(S,null,k(b(a).ingredients,(s,n)=>(p(),g("li",{key:`${s}-${n}`,class:"inventory-item",role:"listitem"},[e("span",ae,f(s),1),e("button",{class:"remove-item","aria-label":`Eliminar ${s}`,title:"Eliminar ingrediente",onClick:r=>b(a).removeIngredient(n)},o[6]||(o[6]=[e("i",{class:"fas fa-times"},null,-1)]),8,ne)]))),128))])]))}},oe=$(ie,[["__scopeId","data-v-e63b56b4"]]),re={class:"meal-type-section"},le={class:"meal-buttons",role:"group","aria-label":"Tipo de comida"},ce=["data-meal","aria-checked","onClick"],de={__name:"MealTypeSelector",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(l,{emit:a}){const t=a,c=[{value:"desayuno",label:"Desayuno",icon:"fas fa-sun"},{value:"almuerzo",label:"Almuerzo",icon:"fas fa-utensils"},{value:"merienda",label:"Merienda",icon:"fas fa-cookie"},{value:"cena",label:"Cena",icon:"fas fa-moon"}],m=u=>{t("update:modelValue",u)};return(u,o)=>(p(),g("section",re,[o[0]||(o[0]=e("h3",null,"Tipo de comida:",-1)),e("div",le,[(p(),g(S,null,k(c,s=>e("button",{key:s.value,class:I(["meal-btn",{selected:l.modelValue===s.value}]),"data-meal":s.value,role:"radio","aria-checked":l.modelValue===s.value,onClick:n=>m(s.value)},[e("i",{class:I(s.icon)},null,2),h(" "+f(s.label),1)],10,ce)),64))])]))}},ue=$(de,[["__scopeId","data-v-f2090326"]]),pe={class:"recipe-card"},ge={class:"recipe-header"},me={class:"recipe-info"},ve={class:"info-item"},he={class:"info-item"},be={class:"info-item"},fe={class:"ingredients-section"},ye={class:"ingredients-list"},$e={class:"instructions-section"},_e={class:"instructions-list"},Ie={key:0,class:"tips-section"},Ce={class:"tips-content"},Se={__name:"RecipeCard",props:{recipe:{type:Object,required:!0},mealType:{type:String,required:!0}},setup(l){const a=l,t={desayuno:"fas fa-sun",almuerzo:"fas fa-utensils",merienda:"fas fa-cookie",cena:"fas fa-moon"},c={desayuno:"Desayuno",almuerzo:"Almuerzo",merienda:"Merienda",cena:"Cena"},m=A(()=>t[a.mealType]||"fas fa-utensils"),u=A(()=>c[a.mealType]||a.mealType);return(o,s)=>(p(),g("article",pe,[e("header",ge,[e("h3",null,[e("i",{class:I(m.value)},null,2),h(" "+f(l.recipe.nombre),1)]),e("p",null,[s[0]||(s[0]=e("strong",null,"Tipo:",-1)),h(" "+f(u.value),1)])]),e("div",me,[e("div",ve,[s[1]||(s[1]=e("i",{class:"fas fa-clock"},null,-1)),s[2]||(s[2]=e("strong",null,"Tiempo",-1)),e("span",null,f(l.recipe.tiempo),1)]),e("div",he,[s[3]||(s[3]=e("i",{class:"fas fa-users"},null,-1)),s[4]||(s[4]=e("strong",null,"Porciones",-1)),e("span",null,f(l.recipe.porciones),1)]),e("div",be,[s[5]||(s[5]=e("i",{class:"fas fa-chart-line"},null,-1)),s[6]||(s[6]=e("strong",null,"Complejidad",-1)),e("span",null,f(l.recipe.complejidad),1)])]),e("section",fe,[s[7]||(s[7]=e("h4",null,[e("i",{class:"fas fa-list"}),h(" Ingredientes:")],-1)),e("div",ye,[e("ul",null,[(p(!0),g(S,null,k(l.recipe.ingredientes,n=>(p(),g("li",{key:n},f(n),1))),128))])])]),e("section",$e,[s[8]||(s[8]=e("h4",null,[e("i",{class:"fas fa-tasks"}),h(" Instrucciones:")],-1)),e("div",_e,[e("ol",null,[(p(!0),g(S,null,k(l.recipe.instrucciones,n=>(p(),g("li",{key:n},f(n),1))),128))])])]),l.recipe.consejos?(p(),g("section",Ie,[s[9]||(s[9]=e("h4",null,[e("i",{class:"fas fa-lightbulb"}),h(" Consejos:")],-1)),e("div",Ce,[e("p",null,f(l.recipe.consejos),1)])])):y("",!0)]))}},ke=$(Se,[["__scopeId","data-v-92852eaf"]]),T=z("recipes",()=>{const{getItem:l,setItem:a}=N(),t=C(l("saved_recipes",[])),c=C([]);return{savedRecipes:t,selectedRecipesForShopping:c,saveRecipe:(n,r="individual")=>{const i={id:Date.now(),type:r,data:n,createdAt:new Date().toISOString()};t.value.push(i),a("saved_recipes",t.value)},deleteRecipe:n=>{t.value=t.value.filter(r=>r.id!==n),c.value=c.value.filter(r=>r!==n),a("saved_recipes",t.value)},clearAllRecipes:()=>{t.value=[],c.value=[],a("saved_recipes",t.value)},toggleRecipeSelection:n=>{const r=c.value.indexOf(n);r>-1?c.value.splice(r,1):c.value.push(n)}}});function Le(){const l=j(),a=R();T();const t=w(),c=C(""),m=C(null);return{selectedMealType:c,generatedRecipe:m,generateRecipe:async()=>{if(t.ingredients.length===0)throw new Error("Por favor, agrega ingredientes a tu inventario para generar una receta.");if(!c.value)throw new Error("Por favor, selecciona un tipo de comida antes de generar la receta.");a.setLoading(!0);try{const o=t.categorizeIngredients(),s=t.ingredients.join(", ");let n="";switch(c.value){case"desayuno":n="Para el desayuno, genera una receta típica y adecuada para la primera comida del día. Evita explícitamente el uso de carnes pesadas (como pollo, carne de res) o pescados como ingrediente principal, y preparaciones muy elaboradas o que requieran mucho tiempo. Prioriza opciones como cereales, huevos, frutas, o lácteos.";break;case"merienda":n="Para la merienda, debe ser una opción ligera, rápida y energizante para media tarde. Evita platos principales o que requieran cocción compleja.";break;case"almuerzo":n="Para el almuerzo, genera una comida principal y sustanciosa. Debe ser una receta completa que pueda incluir proteínas, carbohidratos y vegetales.";break;case"cena":n="Para la cena, genera una comida balanceada, nutritiva y adecuada para la última comida del día. Puede ser ligeramente más ligera que el almuerzo.";break}const r=`
        Eres un chef experto y nutricionista con un profundo conocimiento de dietas balanceadas y costumbres culinarias de Argentina. Tu objetivo es combinar la tradición culinaria local con principios nutricionales modernos para crear recetas y consejos que sean saludables, deliciosos y culturalmente apropiados.
        Necesito que generes una única receta para la comida de ${c.value}.

        Los ingredientes que tengo disponibles en mi inventario son: ${s}.
        ${n}

        Para la receta, proporciona:
        - **Nombre del plato**
        - **Lista completa de ingredientes** con cantidades aproximadas (puedes agregar ingredientes básicos como sal, pimienta, aceite, especias, si son necesarios y no están explícitamente en la lista original).
        - **Instrucciones** paso a paso, claras y concisas.
        - **Tiempo** de preparación (ej. "20 minutos").
        - **Porciones** (ej. "1 persona", "2 personas", "6 personas", etc).
        - **Nivel de complejidad** (Fácil/Intermedio/Difícil).
        - **Consejos** adicionales (opcional, uno o varios si aplica).

        Asegúrate de que la receta sea coherente, balanceada, nutritiva y que use los ingredientes de mi inventario de manera inteligente, no es necesario usar todos los ingredientes.
        Si un ingrediente es esencial para el tipo de comida y no está en el inventario, puedes incluirlo pero prioriza el uso de lo que tengo.

        IMPORTANTE: Responde ÚNICAMENTE con un JSON válido, sin texto adicional antes o después. No incluyas explicaciones o texto introductorio/final. Usa esta estructura exacta:
        {
            "nombre": "Nombre del plato",
            "ingredientes": ["ingrediente 1 - cantidad", "ingrediente 2 - cantidad"],
            "instrucciones": ["paso 1", "paso 2"],
            "tiempo": "X minutos",
            "porciones": "X personas",
            "complejidad": "Fácil",
            "consejos": "Consejos adicionales (opcional)"
        }
      `;let v=(await l.callGeminiAPI(r)).trim();v.startsWith("```json")&&(v=v.replace(/```json\n?/,"").replace(/\n?```$/,"")),v.startsWith("```")&&(v=v.replace(/```\n?/,"").replace(/\n?```$/,""));const d=JSON.parse(v);return d.id=Date.now().toString(),d.mealType=c.value,m.value=d,d;return d}catch(o){throw console.error("Error al generar la receta:",o),o}finally{a.setLoading(!1)}}}}const Re={class:"recipe-creator"},Ee=["disabled"],Te={__name:"RecipeCreator",setup(l){const a=Le(),t=w(),c=R(),m=j(),u=A(()=>t.ingredients.length>0&&a.selectedMealType.value&&m.hasApiKey),o=async()=>{if(!m.hasApiKey){alert("Debes ingresar una API Key válida antes de generar una receta.");return}try{await a.generateRecipe()}catch(r){alert(r.message)}},s=T(),n=()=>{const r=a.generatedRecipe.value;r&&(s.saveRecipe(r),alert("Receta guardada correctamente."))};return(r,i)=>(p(),g("div",Re,[i[3]||(i[3]=e("header",{class:"section-header"},[e("h2",null,[e("i",{class:"fas fa-magic"}),h(" Creador de Recetas Inteligente")]),e("p",null,"Administra tus ingredientes y genera recetas personalizadas con IA")],-1)),L(oe),L(ue,{modelValue:b(a).selectedMealType.value,"onUpdate:modelValue":i[0]||(i[0]=v=>b(a).selectedMealType.value=v),class:"meal-type-section"},null,8,["modelValue"]),e("button",{class:"generate-btn",disabled:!u.value||b(c).isLoading,"aria-label":"Generar receta",onClick:o},[i[1]||(i[1]=e("i",{class:"fas fa-magic"},null,-1)),h(" "+f(b(c).isLoading?"Generando...":"Generar Receta"),1)],8,Ee),b(a).generatedRecipe.value?(p(),D(ke,{key:0,recipe:b(a).generatedRecipe.value,"meal-type":b(a).selectedMealType.value,class:"recipe-result"},null,8,["recipe","meal-type"])):y("",!0),b(a).generatedRecipe.value?(p(),g("button",{key:1,class:"save-btn",onClick:n,style:{"margin-top":"16px"}},i[2]||(i[2]=[e("i",{class:"fas fa-save"},null,-1),h(" Guardar Receta ",-1)]))):y("",!0)]))}},xe=$(Te,[["__scopeId","data-v-fbeb0298"]]),Ae={class:"recipe-selection"},je={class:"section-header"},we=["disabled"],Be={class:"saved-recipes-list"},Oe={key:0,class:"no-recipes"},ze=["data-recipe-id"],Ne={class:"recipe-info-compact"},De={class:"recipe-name"},qe={class:"recipe-meta"},Pe={class:"recipe-actions"},Ge=["aria-label","onClick"],Me=["aria-label","onClick"],Ue={__name:"SavedRecipesList",setup(l){const a=T(),t=o=>a.selectedRecipesForShopping.includes(o),c=o=>new Date(o).toLocaleDateString("es-ES"),m=o=>{const s=a.savedRecipes.find(n=>n.id===o);confirm(`¿Estás seguro de que quieres eliminar la receta "${s?.data.nombre}"?`)&&a.deleteRecipe(o)},u=()=>{confirm("¿Estás seguro de que quieres eliminar todas las recetas guardadas?")&&a.clearAllRecipes()};return(o,s)=>(p(),g("section",Ae,[e("header",je,[s[1]||(s[1]=e("h3",null,"Recetas Guardadas:",-1)),e("button",{class:"clear-btn",disabled:b(a).savedRecipes.length===0,title:"Eliminar todas las recetas guardadas","aria-label":"Eliminar todas las recetas guardadas",onClick:u},s[0]||(s[0]=[e("i",{class:"fas fa-trash-alt"},null,-1),h(" Eliminar Todas ",-1)]),8,we)]),e("ul",Be,[b(a).savedRecipes.length===0?(p(),g("li",Oe,s[2]||(s[2]=[e("p",null,"No hay recetas guardadas. Genera algunas recetas primero.",-1)]))):y("",!0),(p(!0),g(S,null,k(b(a).savedRecipes,n=>(p(),g("li",{key:n.id,class:I(["recipe-item",{selected:t(n.id)}]),"data-recipe-id":n.id},[e("div",Ne,[e("div",De,f(n.data.nombre),1),e("div",qe,[s[3]||(s[3]=e("i",{class:"fas fa-calendar"},null,-1)),h(" "+f(c(n.createdAt))+" • "+f(n.data.tiempo)+" • "+f(n.data.porciones),1)])]),e("div",Pe,[e("button",{class:"recipe-select-btn","aria-label":t(n.id)?"Deseleccionar receta":"Seleccionar receta",onClick:r=>b(a).toggleRecipeSelection(n.id)},f(t(n.id)?"Deseleccionar":"Seleccionar"),9,Ge),e("button",{class:"recipe-delete-btn",title:"Eliminar receta","aria-label":`Eliminar receta ${n.data.nombre}`,onClick:r=>m(n.id)},s[4]||(s[4]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Me)])],10,ze))),128))])]))}},Ve=$(Ue,[["__scopeId","data-v-d7697bab"]]),Fe={class:"shopping-options"},Ke={role:"group","aria-labelledby":"shopping-options-heading"},Je={class:"option-group"},We={class:"checkbox-label"},He=["checked"],Xe={class:"option-group"},Qe={class:"checkbox-label"},Ye=["checked"],Ze={class:"option-group"},es={class:"checkbox-label"},ss=["checked"],ts={__name:"ShoppingOptions",props:{includeBasics:{type:Boolean,default:!0},groupByCategory:{type:Boolean,default:!0},excludeInventory:{type:Boolean,default:!0}},emits:["update:includeBasics","update:groupByCategory","update:excludeInventory"],setup(l){return(a,t)=>(p(),g("section",Fe,[t[9]||(t[9]=e("h3",null,"Opciones de Lista:",-1)),e("div",Ke,[e("div",Je,[e("label",We,[e("input",{type:"checkbox",checked:l.includeBasics,onChange:t[0]||(t[0]=c=>a.$emit("update:includeBasics",c.target.checked))},null,40,He),t[3]||(t[3]=e("span",{class:"checkmark"},null,-1)),t[4]||(t[4]=h(" Incluir ingredientes básicos (sal, aceite, especias) ",-1))])]),e("div",Xe,[e("label",Qe,[e("input",{type:"checkbox",checked:l.groupByCategory,onChange:t[1]||(t[1]=c=>a.$emit("update:groupByCategory",c.target.checked))},null,40,Ye),t[5]||(t[5]=e("span",{class:"checkmark"},null,-1)),t[6]||(t[6]=h(" Agrupar por categorías (carnes, vegetales, etc.) ",-1))])]),e("div",Ze,[e("label",es,[e("input",{type:"checkbox",checked:l.excludeInventory,onChange:t[2]||(t[2]=c=>a.$emit("update:excludeInventory",c.target.checked))},null,40,ss),t[7]||(t[7]=e("span",{class:"checkmark"},null,-1)),t[8]||(t[8]=h(" Excluir ingredientes que ya tengo ",-1))])])])]))}},as=$(ts,[["__scopeId","data-v-8343a330"]]),ns={class:"shopping-list-result"},is={class:"shopping-summary"},os={class:"summary-stats"},rs={class:"stat-item"},ls={class:"stat-number"},cs={key:0,class:"stat-item"},ds={class:"stat-number"},us={class:"stat-item"},ps={class:"stat-number"},gs={class:"shopping-list-card"},ms={key:0},vs={key:0},hs={key:1,class:"shopping-items"},bs=["data-item"],fs=["checked","onChange"],ys={class:"shopping-item-text"},$s={key:1,class:"shopping-category"},_s={class:"shopping-items"},Is=["data-item"],Cs=["checked","onChange"],Ss={class:"shopping-item-text"},ks={class:"shopping-actions"},Ls={__name:"ShoppingListResult",props:{shoppingList:{type:Object,required:!0},groupByCategory:{type:Boolean,default:!0}},emits:["clear"],setup(l){const a=l,t=C(new Set),c=s=>{t.value.has(s)?t.value.delete(s):t.value.add(s)},m=()=>{u().forEach(n=>t.value.add(n))},u=()=>{const s=[];return a.groupByCategory&&a.shoppingList.categorias?Object.entries(a.shoppingList.categorias).forEach(([n,r])=>{r.items&&r.items.forEach((i,v)=>{s.push(`${n}-${v}`)})}):a.shoppingList.items&&a.shoppingList.items.forEach((n,r)=>{s.push(`item-${r}`)}),s},o=()=>{let s=`=== LISTA DE COMPRAS ===

`;s+=`Generada el: ${new Date().toLocaleDateString()}
`,s+=`Total de productos: ${a.shoppingList.resumen.totalItems}
`,s+=`Productos completados: ${t.value.size}

`,s+=`PRODUCTOS PENDIENTES:
`,a.groupByCategory&&a.shoppingList.categorias?Object.entries(a.shoppingList.categorias).forEach(([v,d])=>{d.items&&d.items.length>0&&(s+=`
${d.nombre.toUpperCase()}:
`,d.items.forEach((_,x)=>{const E=`${v}-${x}`;t.value.has(E)||(s+=`☐ ${_}
`)}))}):a.shoppingList.items&&a.shoppingList.items.forEach((v,d)=>{const _=`item-${d}`;t.value.has(_)||(s+=`☐ ${v}
`)}),t.value.size>0&&(s+=`
PRODUCTOS COMPLETADOS:
`,a.groupByCategory&&a.shoppingList.categorias?Object.entries(a.shoppingList.categorias).forEach(([v,d])=>{d.items&&d.items.length>0&&d.items.filter((x,E)=>t.value.has(`${v}-${E}`)).length>0&&(s+=`
${d.nombre.toUpperCase()}:
`,d.items.forEach((x,E)=>{const q=`${v}-${E}`;t.value.has(q)&&(s+=`☑ ${x}
`)}))}):a.shoppingList.items&&a.shoppingList.items.forEach((v,d)=>{const _=`item-${d}`;t.value.has(_)&&(s+=`☑ ${v}
`)}));const n=new Blob([s],{type:"text/plain"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`lista-compras-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),alert("Lista de compras exportada exitosamente")};return(s,n)=>(p(),g("div",ns,[e("div",is,[n[4]||(n[4]=e("h3",null,[e("i",{class:"fas fa-chart-pie"}),h(" Resumen de tu Lista de Compras")],-1)),e("div",os,[e("div",rs,[e("span",ls,f(l.shoppingList.resumen.totalItems),1),n[1]||(n[1]=e("div",{class:"stat-label"},"Productos totales",-1))]),l.groupByCategory?(p(),g("div",cs,[e("span",ds,f(l.shoppingList.resumen.categorias),1),n[2]||(n[2]=e("div",{class:"stat-label"},"Categorías",-1))])):y("",!0),e("div",us,[e("span",ps,f(l.shoppingList.resumen.recetasIncluidas),1),n[3]||(n[3]=e("div",{class:"stat-label"},"Recetas incluidas",-1))])])]),e("div",gs,[e("h3",null,[n[5]||(n[5]=e("i",{class:"fas fa-list-alt"},null,-1)),h(" Lista de Compras"+f(l.groupByCategory?" por Categorías":""),1)]),l.groupByCategory&&l.shoppingList.categorias?(p(),g("div",ms,[(p(!0),g(S,null,k(Object.entries(l.shoppingList.categorias),([r,i])=>(p(),g("div",{key:r,class:"shopping-category"},[i.items&&i.items.length>0?(p(),g("h4",vs,[e("i",{class:I(i.icono)},null,2),h(" "+f(i.nombre),1)])):y("",!0),i.items&&i.items.length>0?(p(),g("div",hs,[(p(!0),g(S,null,k(i.items,(v,d)=>(p(),g("div",{key:`${r}-${d}`,class:I(["shopping-item",{checked:t.value.has(`${r}-${d}`)}]),"data-item":`${r}-${d}`},[e("input",{type:"checkbox",class:"shopping-checkbox",checked:t.value.has(`${r}-${d}`),onChange:_=>c(`${r}-${d}`)},null,40,fs),e("span",ys,f(v),1)],10,bs))),128))])):y("",!0)]))),128))])):l.shoppingList.items?(p(),g("div",$s,[e("div",_s,[(p(!0),g(S,null,k(l.shoppingList.items,(r,i)=>(p(),g("div",{key:`item-${i}`,class:I(["shopping-item",{checked:t.value.has(`item-${i}`)}]),"data-item":`item-${i}`},[e("input",{type:"checkbox",class:"shopping-checkbox",checked:t.value.has(`item-${i}`),onChange:v=>c(`item-${i}`)},null,40,Cs),e("span",Ss,f(r),1)],10,Is))),128))])])):y("",!0),e("div",ks,[e("button",{class:"action-btn primary",onClick:o},n[6]||(n[6]=[e("i",{class:"fas fa-download"},null,-1),h(" Descargar Lista ",-1)])),e("button",{class:"action-btn secondary",onClick:n[0]||(n[0]=r=>s.$emit("clear"))},n[7]||(n[7]=[e("i",{class:"fas fa-trash"},null,-1),h(" Limpiar Lista ",-1)])),e("button",{class:"action-btn success",onClick:m},n[8]||(n[8]=[e("i",{class:"fas fa-check-double"},null,-1),h(" Marcar Todo ",-1)]))])])]))}},Rs=$(Ls,[["__scopeId","data-v-3804f03e"]]);function Es(){const l=j(),a=R(),t=T(),c=w();return{generateShoppingList:async u=>{if(t.selectedRecipesForShopping.length===0)throw new Error("Por favor selecciona al menos una receta para generar la lista de compras");a.setLoading(!0);try{const o=t.savedRecipes.filter(d=>t.selectedRecipesForShopping.includes(d.id));let s=[];o.forEach(d=>{d.data.ingredientes&&(s=s.concat(d.data.ingredientes))});const n=`
        Eres un asistente experto en compras de supermercado. Necesito que generes una lista de compras inteligente basada en los siguientes ingredientes de recetas:

        INGREDIENTES DE LAS RECETAS:
        ${s.map((d,_)=>`${_+1}. ${d}`).join(`
`)}

        ${u.excludeInventory?`
MIS INGREDIENTES ACTUALES (excluir estos ingredientes):
${c.ingredients.map(d=>`- ${d}`).join(`
`)}`:""}

        INSTRUCCIONES:
        1. Analiza todos los ingredientes y crea una lista de compras optimizada
        2. Combina ingredientes similares (ej: si aparece "tomate - 2 unidades" y "tomate - 1 unidad", combinar como "tomate - 3 unidades")
        3. ${u.excludeInventory?"Excluye los ingredientes que ya tengo disponibles":"Incluye todos los ingredientes"}
        4. ${u.includeBasics?"Incluye ingredientes básicos comunes (sal, pimienta, aceite) si no están listados":"No agregues ingredientes básicos adicionales"}
        5. ${u.groupByCategory?"Agrupa los ingredientes por categorías de supermercado":"Lista todos los ingredientes juntos"}
        6. Optimiza las cantidades para evitar desperdicios
        7. Sugiere alternativas o marcas cuando sea apropiado

        IMPORTANTE: Responde ÚNICAMENTE con un JSON válido, sin texto adicional. Usa esta estructura:
        ${u.groupByCategory?`{
          "resumen": {
              "totalItems": 0,
              "categorias": 0,
              "recetasIncluidas": ${o.length}
          },
          "categorias": {
              "carnes_pescados": {
                  "nombre": "Carnes y Pescados",
                  "icono": "fas fa-drumstick-bite",
                  "items": ["item - cantidad"]
              },
              "vegetales_frutas": {
                  "nombre": "Vegetales y Frutas",
                  "icono": "fas fa-apple-alt",
                  "items": ["item - cantidad"]
              },
              "lacteos_huevos": {
                  "nombre": "Lácteos y Huevos",
                  "icono": "fas fa-cheese",
                  "items": ["item - cantidad"]
              },
              "cereales_granos": {
                  "nombre": "Cereales y Granos",
                  "icono": "fas fa-seedling",
                  "items": ["item - cantidad"]
              },
              "condimentos_especias": {
                  "nombre": "Condimentos y Especias",
                  "icono": "fas fa-pepper-hot",
                  "items": ["item - cantidad"]
              },
              "otros": {
                  "nombre": "Otros",
                  "icono": "fas fa-shopping-basket",
                  "items": ["item - cantidad"]
              }
          }
      }`:`{
          "resumen": {
              "totalItems": 0,
              "recetasIncluidas": ${o.length}
          },
          "items": ["item - cantidad", "item - cantidad"]
      }`}
      `;let i=(await l.callGeminiAPI(n)).trim();return i.startsWith("```json")&&(i=i.replace(/```json\n?/,"").replace(/\n?```$/,"")),i.startsWith("```")&&(i=i.replace(/```\n?/,"").replace(/\n?```$/,"")),JSON.parse(i)}catch(o){throw console.error("Error al generar la lista de compras:",o),o}finally{a.setLoading(!1)}}}}const Ts={class:"shopping-list"},xs={class:"shopping-controls"},As=["disabled"],js={__name:"ShoppingList",setup(l){const a=T(),t=R(),c=Es(),m=C({includeBasics:!0,groupByCategory:!0,excludeInventory:!0}),u=C(null),o=A(()=>a.selectedRecipesForShopping.length>0),s=async()=>{try{const r=await c.generateShoppingList(m.value);u.value=r}catch(r){alert(r.message)}},n=()=>{confirm("¿Estás seguro de que quieres limpiar la lista de compras?")&&(u.value=null,a.selectedRecipesForShopping.length=0)};return(r,i)=>(p(),g("div",Ts,[i[4]||(i[4]=e("header",{class:"section-header"},[e("h2",null,[e("i",{class:"fas fa-shopping-cart"}),h(" Lista de Compras Inteligente")]),e("p",null," Genera automáticamente tu lista de compras basada en las recetas y tus ingredientes actuales ")],-1)),e("div",xs,[L(Ve),L(as,{"include-basics":m.value.includeBasics,"onUpdate:includeBasics":i[0]||(i[0]=v=>m.value.includeBasics=v),"group-by-category":m.value.groupByCategory,"onUpdate:groupByCategory":i[1]||(i[1]=v=>m.value.groupByCategory=v),"exclude-inventory":m.value.excludeInventory,"onUpdate:excludeInventory":i[2]||(i[2]=v=>m.value.excludeInventory=v)},null,8,["include-basics","group-by-category","exclude-inventory"]),e("button",{class:"generate-btn",disabled:!o.value||b(t).isLoading,"aria-label":"Generar lista de compras",onClick:s},[i[3]||(i[3]=e("i",{class:"fas fa-list-alt"},null,-1)),h(" "+f(b(t).isLoading?"Generando...":"Generar Lista de Compras"),1)],8,As)]),u.value?(p(),D(Rs,{key:0,"shopping-list":u.value,"group-by-category":m.value.groupByCategory,onClear:n},null,8,["shopping-list","group-by-category"])):y("",!0)]))}},ws=$(js,[["__scopeId","data-v-e0b299ff"]]),Bs={class:"main-app"},Os={class:"tab-content",role:"tabpanel","aria-labelledby":"recipe-creator-tab"},zs={class:"tab-content",role:"tabpanel","aria-labelledby":"shopping-list-tab"},Ns={__name:"HomeView",setup(l){const a=R();return(t,c)=>(p(),g("main",Bs,[L(H),B(e("section",Os,[L(xe)],512),[[O,b(a).currentTab==="recipe-creator"]]),B(e("section",zs,[L(ws)],512),[[O,b(a).currentTab==="shopping-list"]])]))}},qs=$(Ns,[["__scopeId","data-v-7898df1b"]]);export{qs as default};
//# sourceMappingURL=HomeView-Dr1lWc9C.js.map
